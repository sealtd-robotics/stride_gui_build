(this.webpackJsonpstride=this.webpackJsonpstride||[]).push([[0],{235:function(t,e,a){},236:function(t,e,a){},271:function(t,e,a){"use strict";a.r(e);var i=a(2),r=a.n(i),n=a(37),o=a.n(n),s=(a(235),a(236),a(193)),c=a(48);const l=185,d={0:"Initial",1:"Manual",2:"Auto",3:"E-Stopped",5:"Stopped",6:"Decending",7:"Idle"},h={0:"No Solution",1:"Unknown",2:"Single",3:"PSRDIFF",4:"SBAS",5:"Omnister",6:"RTK Float",7:"RTK Integer"},b={0:"None",1:"SpeedDeviationError",2:"FollowingError",4:"OverVoltageError",8:"UnderVoltageError",16:"TempWarning",32:"TempError",64:"Encoder error",128:"Int HW error",512:"Current Measurement Error",2048:"Com error",4096:"Calc error",8192:"Dynamic Limit",16384:"Safety monitor error"};class u{constructor(t,e){this.guiState=void 0,this.robotState=void 0,this.socket=void 0,this.senders=void 0,this.dataArrivalTime=void 0,this.intervalId1=void 0,this.intervalId2=void 0,this.receivedSharedPath=void 0,this.pathToFollow=void 0,this.vehiclePathToFollow=void 0,this.lastConnectedId=void 0,this.isConnectedOnce=void 0,this.isNewTestDataReady=void 0,this.testLogMessages=void 0,this.errorMessages=void 0,e?(this.lastConnectedId=t,this.isConnectedOnce=!0):(this.lastConnectedId="",this.isConnectedOnce=!1),this.guiState={isConnected:!1,id:t},this.robotState={type:"robotState",robotVelocityCommand:{v:0,w:0},robotTurningRadius:0,overseerState:0,websocketClientCount:0,doesBrakeWhenStopped:!1,robotTemperature:0,batteryTemperature:0,batteryVoltage:0,portentaHeartbeat:!0,tempErrorWord:0,motorControllers:{leftFront:{isHeartbeatTimeout:!1,errorWord:0,windingTemperature:0},leftBack:{isHeartbeatTimeout:!1,errorWord:0,windingTemperature:0},rightFront:{isHeartbeatTimeout:!1,errorWord:0,windingTemperature:0},rightBack:{isHeartbeatTimeout:!1,errorWord:0,windingTemperature:0}},gps:{status:-1,latitude:0,longitude:0,northVelocity:0,eastVelocity:0,heading:0,num_satellites:0,diff_age:0},pathFollower:{pathName:"",vehiclePathName:"",scriptName:""},targetVehicle:{latitude:0,longitude:0,heading:0,velocity:0,gps_ready:!1,gps_correction_type:0},mechanicalBrake:{hasBrake:!1,brakeStatus:0},license_information:{product_name:"",license_type:"",issue_date:"",customer_name:"",features:""}},this.receivedSharedPath={timestamp:"",latitudes:[],longitudes:[]},this.pathToFollow={latitudes:[],longitudes:[]},this.vehiclePathToFollow={latitudes:[],longitudes:[]},this.isNewTestDataReady=!1,this.testLogMessages=[],this.errorMessages=[],this.dataArrivalTime=0;try{this.socket="localhost"===t?new WebSocket("ws://localhost:9000"):"999"===t?new WebSocket("ws://192.168.1.129:9000"):new WebSocket("ws://195.0.0."+t+":9000")}catch(a){console.error(a),this.socket=new WebSocket("ws://0.0.0.0")}this.socket.onopen=t=>{this.guiState.isConnected=!0,this.dataArrivalTime=Date.now(),this.lastConnectedId=this.guiState.id,this.isConnectedOnce=!0,this.intervalId1=setInterval((()=>{Date.now()-this.dataArrivalTime>4e3&&(this.guiState.isConnected=!1,this.socket.close())}),250),this.intervalId2=setInterval((()=>{this.senders.heartbeat()}),200)},this.socket.onmessage=t=>{this.dataArrivalTime=Date.now();const e=JSON.parse(t.data);if("robotState"===e.type)this.robotState=e;else if("sharedPath"===e.type){const t=(new Date).toLocaleTimeString();this.receivedSharedPath={timestamp:t,latitudes:e.latitudes,longitudes:e.longitudes}}else if("/path_follower/path_to_follow"===e.type)this.pathToFollow.latitudes=e.latitudes,this.pathToFollow.longitudes=e.longitudes;else if("/path_follower/vehicle_path_to_follow"===e.type)this.vehiclePathToFollow.latitudes=e.latitudes,this.vehiclePathToFollow.longitudes=e.longitudes;else if("createdCSV"===e.type)this.isNewTestDataReady=!0;else if("commandMessage"===e.type)this.testLogMessages.push(e.commandMessage);else if("errorMessage"===e.type){const t=(new Date).toLocaleTimeString();this.errorMessages.push(t);const a=e.errorMessage.split(/\r?\n/);for(const e of a)2===this.robotState.overseerState&&this.testLogMessages.push(e),this.errorMessages.push(e)}},this.socket.onclose=t=>{this.guiState.isConnected=!1,clearInterval(this.intervalId1),clearInterval(this.intervalId2)},this.senders={joystick:(t,e)=>{const a={type:"/joystick",travel:t,angle:e};this.guiState.isConnected&&this.socket.send(JSON.stringify(a))},spin:t=>{const e={type:"/robot_velocity_command",x:0,theta:t};this.guiState.isConnected&&1===this.robotState.overseerState&&this.socket.send(JSON.stringify(e))},moveForward:t=>{const e={type:"/robot_velocity_command",x:t,theta:0};this.guiState.isConnected&&1===this.robotState.overseerState&&this.socket.send(JSON.stringify(e))},stop:()=>{const t={type:"/gui/stop_clicked"};this.guiState.isConnected&&this.socket.send(JSON.stringify(t))},enableManaul:()=>{this.guiState.isConnected&&this.socket.send(JSON.stringify({type:"/gui/enable_manual_clicked"}))},releaseMechanicalBrake:()=>{this.guiState.isConnected&&this.socket.send(JSON.stringify({type:"/gui/release_mechanical_brake_clicked"}))},idle:()=>{this.guiState.isConnected&&this.socket.send(JSON.stringify({type:"/gui/idle_clicked"}))},heartbeat:()=>{this.socket.readyState===WebSocket.OPEN&&this.socket.send(JSON.stringify({type:"/gui/heartbeat"}))},toggleBrakeWhenStopped:()=>{this.guiState.isConnected&&this.socket.send(JSON.stringify({type:"/gui/brake_when_stopped_toggled"}))},setMagneticCalibration:t=>{const e={type:"/an_device/magnetic_calibration/calibrate",method:t};this.guiState.isConnected&&this.socket.send(JSON.stringify(e))},sharePath:(t,e)=>{const a={type:"sharedPath",latitudes:t,longitudes:e};this.guiState.isConnected&&this.socket.send(JSON.stringify(a))},startPathFollowing:()=>{this.guiState.isConnected&&this.socket.send(JSON.stringify({type:"/gui/start_path_following_clicked"}))},uploadPath:(t,e)=>{if("txt"!==t.split(".")[1])return;const a={type:"/gui/upload_path_clicked",filename:t,fileContent:e};this.socket.send(JSON.stringify(a))},uploadVehiclePath:(t,e)=>{if("txt"!==t.split(".")[1])return;const a={type:"/gui/upload_vehicle_path_clicked",filename:t,fileContent:e};this.socket.send(JSON.stringify(a))},uploadScript:(t,e)=>{if("py"!==t.split(".")[1])return;const a={type:"/gui/upload_script_clicked",filename:t,fileContent:e};this.socket.send(JSON.stringify(a))},returnToStart:()=>{this.guiState.isConnected&&this.socket.send(JSON.stringify({type:"/gui/return_to_start_clicked"}))},resetMicroController:()=>{const t={type:"/gui/reset_micro_controller"};this.guiState.isConnected&&this.socket.send(JSON.stringify(t))}}}}var p=a(314),j=a(336),g=a(334),m=a(315),x=a(316),f=a(317),v=a(150),O=a(92),y=a.n(O),S=a(338),k=a(311),w=a(44);function N(t){return 0!==t.motorControllers.leftFront.errorWord&&64!==t.motorControllers.leftFront.errorWord||t.motorControllers.leftFront.isHeartbeatTimeout||0!==t.motorControllers.leftBack.errorWord&&64!==t.motorControllers.leftBack.errorWord||t.motorControllers.leftBack.isHeartbeatTimeout||0!==t.motorControllers.rightFront.errorWord&&64!==t.motorControllers.rightFront.errorWord||t.motorControllers.rightFront.isHeartbeatTimeout||0!==t.motorControllers.rightBack.errorWord&&64!==t.motorControllers.rightBack.errorWord||t.motorControllers.rightBack.isHeartbeatTimeout||0!==t.tempErrorWord}function C(t){var e=.0818191908426,a=6378137,i=Math.PI,r=Math.sin,n=Math.cos,o=Math.sqrt;return[n(t*i/180)*a/o(1-Math.pow(r(t*i/180),2)*Math.pow(e,2))*i/180,(1-Math.pow(e,2))*a/((1-Math.pow(r(t*i/180),2)*Math.pow(e,2))*o(1-Math.pow(r(t*i/180),2)*Math.pow(e,2)))*i/180]}function _(t,e,a,i,r,n){return[(t-a)*n,(e-i)*r]}var R=a(5),T=Object(k.a)((function(t){return{toolbar:t.mixins.toolbar,drawerPaper:{width:l},logo:{paddingTop:10},list:{padding:0},errorIcon:{color:"red"}}}));function M(t){var e=t.networking,a=t.mobileOpen,i=t.setMobileOpen,r=T(),n=Object(w.a)(),o=Object(c.g)(),s=[{text:"Initial Setup",onClick:function(){o.push("/initialsetup"),i(!1)},canShowErrorIcon:!1},{text:"Manual Control",onClick:function(){o.push("/manualcontrol"),i(!1)},canShowErrorIcon:!1},{text:"Robot Status",onClick:function(){o.push("/robotstatus"),i(!1)},canShowErrorIcon:!0},{text:"Path",onClick:function(){o.push("/path"),i(!1)},canShowErrorIcon:!1},{text:"Path Following",onClick:function(){o.push("/pathfollowing"),i(!1)},canShowErrorIcon:!1}],l=Object(R.jsxs)("div",{children:[Object(R.jsx)("div",{className:r.toolbar,children:Object(R.jsx)(v.a,{variant:"h4",align:"center",color:"primary",className:r.logo,children:"STRIDE"})}),Object(R.jsx)(p.a,{}),Object(R.jsx)(m.a,{className:r.list,children:s.map((function(t){var a=t.text,i=t.onClick,n=t.canShowErrorIcon;return Object(R.jsxs)(x.a,{button:!0,onClick:i,children:[Object(R.jsx)(f.a,{primary:a}),n&&N(e.robotState)&&e.guiState.isConnected?Object(R.jsx)(S.a,{title:"ERROR",children:Object(R.jsx)(y.a,{className:r.errorIcon})}):null]},a)}))})]});return Object(R.jsxs)("nav",{"aria-label":"mailbox folders",children:[Object(R.jsx)(g.a,{mdUp:!0,implementation:"css",children:Object(R.jsx)(j.a,{variant:"temporary",anchor:"rtl"===n.direction?"right":"left",open:a,onClose:function(){return i(!1)},classes:{paper:r.drawerPaper},ModalProps:{keepMounted:!0},children:l})}),Object(R.jsx)(g.a,{smDown:!0,implementation:"css",children:Object(R.jsx)(j.a,{classes:{paper:r.drawerPaper},variant:"permanent",open:!0,children:l})})]})}var F,L,I=a(149),B=a(320),P=a(323),E=a(322),D=a(206),V=a.n(D),W=a(205),z=a.n(W),H=a(321),A=a(181),J=a(180),G=a(196),U=a(212);function q(){return q=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(t[i]=a[i])}return t},q.apply(this,arguments)}function X(t,e){let{title:a,titleId:r,...n}=t;return i.createElement("svg",q({id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 122.88 122.29",style:{enableBackground:"new 0 0 122.88 122.29"},xmlSpace:"preserve",ref:e,"aria-labelledby":r},n),a?i.createElement("title",{id:r},a):null,F||(F=i.createElement("style",{type:"text/css"},".st0{fill-rule:evenodd;clip-rule:evenodd;}")),L||(L=i.createElement("g",null,i.createElement("path",{className:"st0",d:"M18.86,59.43l-4.25-1.19c-0.26,2.11-0.4,4.26-0.4,6.44c0,6.93,1.37,13.53,3.86,19.53v0.01 c2.59,6.24,6.38,11.86,11.09,16.56l0.01,0.01c4.7,4.71,10.32,8.5,16.56,11.09h0.01c6,2.49,12.6,3.86,19.53,3.86 c6.93,0,13.53-1.37,19.53-3.86c6.23-2.58,11.85-6.38,16.57-11.1h0.01c4.71-4.7,8.5-10.32,11.09-16.56V84.2 c2.49-6,3.86-12.6,3.86-19.53c0-6.93-1.37-13.53-3.86-19.53c-2.58-6.23-6.38-11.85-11.1-16.57v-0.01 c-4.7-4.71-10.32-8.5-16.56-11.09h-0.01c-4.19-1.74-8.67-2.93-13.36-3.49v5.62C46.4,19.6,25.3,36.45,18.86,59.43L18.86,59.43z M60.83,6.79c2.26,0,4.1,1.83,4.1,4.1c0,2.26-1.83,4.1-4.1,4.1c-2.26,0-4.1-1.83-4.1-4.1C56.74,8.63,58.57,6.79,60.83,6.79 L60.83,6.79z M13.43,42.53c2.26,0,4.1,1.83,4.1,4.1c0,2.26-1.83,4.1-4.1,4.1c-2.26,0-4.1-1.83-4.1-4.1 C9.33,44.36,11.17,42.53,13.43,42.53L13.43,42.53z M8.24,56.44L0,54.13C8.99,22.12,38.19,0,71.44,0v7.39 c5.56,0.59,10.89,1.98,15.87,4.04l0,0c7.05,2.92,13.39,7.2,18.69,12.51l0.01-0.01c5.3,5.3,9.58,11.65,12.51,18.72 c2.82,6.8,4.37,14.24,4.37,22.02c0,7.79-1.56,15.24-4.37,22.04l0,0c-2.92,7.05-7.2,13.39-12.51,18.69l0.01,0.01 c-5.3,5.3-11.65,9.58-18.72,12.51c-6.8,2.82-14.24,4.37-22.02,4.37c-7.79,0-15.24-1.56-22.04-4.37l0,0 c-7.05-2.92-13.39-7.2-18.69-12.5l-0.01-0.01c-5.3-5.3-9.58-11.64-12.5-18.69l0,0c-2.82-6.8-4.37-14.24-4.37-22.04 C7.65,61.88,7.85,59.13,8.24,56.44L8.24,56.44z M65.27,29.18c4.81,0,9.39,0.96,13.58,2.69c4.34,1.8,8.25,4.44,11.52,7.71 c3.27,3.27,5.91,7.18,7.71,11.53c1.73,4.18,2.69,8.77,2.69,13.57c0,4.81-0.96,9.39-2.69,13.58c-1.8,4.34-4.44,8.25-7.71,11.52 c-3.27,3.27-7.18,5.91-11.53,7.71c-4.18,1.73-8.77,2.69-13.57,2.69c-4.81,0-9.39-0.96-13.58-2.69c-4.34-1.8-8.25-4.44-11.52-7.71 c-3.27-3.27-5.91-7.18-7.71-11.53c-1.73-4.18-2.69-8.77-2.69-13.57c0-4.81,0.96-9.39,2.69-13.58c1.8-4.34,4.44-8.25,7.71-11.52 c3.27-3.27,7.18-5.91,11.53-7.71C55.88,30.14,60.46,29.18,65.27,29.18L65.27,29.18z M57.41,58.28c0.12-0.16,0.24-0.31,0.36-0.46 c0.18-0.22,0.38-0.43,0.59-0.64c0.49-0.48,1.02-0.91,1.6-1.29c0.49-0.32,1.01-0.59,1.55-0.82l0-18.27 c-3.02,0.4-5.88,1.28-8.52,2.56c-2.84,1.38-5.41,3.22-7.61,5.42c-1.21,1.21-2.31,2.52-3.28,3.93c-0.88,1.28-1.66,2.63-2.33,4.05 L57.41,58.28L57.41,58.28z M68.54,60.82c-0.42-0.42-0.93-0.77-1.5-1c-0.54-0.22-1.14-0.35-1.78-0.35c-0.63,0-1.23,0.12-1.78,0.35 c-0.56,0.23-1.07,0.57-1.5,1l-0.01,0.01c-0.43,0.43-0.77,0.93-1,1.5c-0.22,0.54-0.35,1.14-0.35,1.78c0,0.63,0.12,1.23,0.35,1.78 c0.23,0.57,0.57,1.07,1,1.5L62,67.38c0.42,0.43,0.93,0.77,1.5,1c0.54,0.22,1.14,0.35,1.78,0.35c0.63,0,1.23-0.12,1.78-0.35 c0.57-0.23,1.07-0.57,1.5-1l0.01-0.01c0.42-0.42,0.77-0.93,1-1.5c0.22-0.54,0.35-1.14,0.35-1.78c0-0.63-0.13-1.23-0.35-1.78 C69.31,61.76,68.96,61.25,68.54,60.82L68.54,60.82z M68.85,54.99c0.58,0.23,1.14,0.52,1.67,0.86c0.61,0.39,1.16,0.83,1.66,1.33 c0.16,0.16,0.33,0.34,0.49,0.53c0.1,0.12,0.2,0.24,0.29,0.36l17.99-4.82c-0.67-1.51-1.48-2.96-2.4-4.32 c-1.01-1.49-2.16-2.88-3.43-4.15c-2.23-2.23-4.83-4.08-7.69-5.47c-2.66-1.28-5.56-2.16-8.6-2.55V54.99L68.85,54.99z M75,65.15 c-0.08,0.69-0.22,1.37-0.43,2.01c-0.22,0.66-0.51,1.3-0.86,1.89l10.42,16.51l0.36-0.33c0.22-0.2,0.44-0.42,0.68-0.66 c2.59-2.59,4.68-5.69,6.11-9.13c1.37-3.31,2.13-6.95,2.13-10.76c0-0.81-0.03-1.62-0.1-2.41c-0.06-0.66-0.14-1.32-0.24-1.96 L75,65.15L75,65.15z M67.87,73.54c-0.37,0.1-0.75,0.18-1.13,0.24c-0.48,0.07-0.97,0.11-1.47,0.11c-0.44,0-0.88-0.03-1.32-0.09 c-0.34-0.05-0.68-0.11-1.01-0.19L52.89,89.95c1.84,0.9,3.78,1.61,5.81,2.09c2.1,0.5,4.3,0.77,6.57,0.77c2.35,0,4.62-0.29,6.8-0.83 c2.11-0.52,4.12-1.28,6.02-2.25L67.87,73.54L67.87,73.54z M56.96,69.27c-0.36-0.58-0.67-1.2-0.9-1.85 c-0.23-0.64-0.4-1.31-0.49-2.01l-18.01-5.64c-0.13,0.74-0.23,1.48-0.3,2.22c-0.08,0.87-0.13,1.77-0.13,2.68 c0,3.81,0.76,7.45,2.13,10.76c1.42,3.44,3.51,6.54,6.11,9.13c0.28,0.28,0.57,0.55,0.84,0.81l0.54,0.49L56.96,69.27L56.96,69.27z"}))))}const Y=i.forwardRef(X);a.p;function $(t){return Object(R.jsx)("div",{children:Object(R.jsx)(U.a,Object(G.a)(Object(G.a)({},t),{},{children:Object(R.jsx)(Y,{})}))})}var K=Object(k.a)((function(t){return{appBar:Object(I.a)({},t.breakpoints.up("md"),{width:"calc(100% - ".concat(l,"px)"),marginLeft:l}),title:{marginRight:"auto"},menuButton:Object(I.a)({},t.breakpoints.up("md"),{display:"none"}),stop:{marginLeft:t.spacing(1.5)},start:{backgroundColor:"green",color:"white",marginLeft:t.spacing(1.5),"&:hover":{background:"darkgreen"}},connection:{color:"lightgray"},state:{marginLeft:t.spacing(1.5),color:"lightgray"},errorIcon:{marginLeft:t.spacing(1.5),color:"red"},reconnect:{marginLeft:t.spacing(1.5),backgroundColor:"green",color:"white","&:hover":{backgroundColor:"darkgreen"}},brakeIcon:{marginLeft:t.spacing(1.5),fontSize:30},idle:{marginLeft:t.spacing(1.5),backgroundColor:"green",color:"white","&:hover":{backgroundColor:"darkgreen"}}}}));function Q(t){var e=t.networking,a=t.setMobileOpen,i=t.topBarTitle,r=t.pathRecorder,n=t.handleRobotConnect,o=K(),s=e.guiState,c=e.robotState,l=e.senders;return Object(R.jsx)(B.a,{position:"fixed",className:o.appBar,children:Object(R.jsxs)(H.a,{children:[Object(R.jsx)(E.a,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:function(){return a(!0)},className:o.menuButton,children:Object(R.jsx)(z.a,{})}),Object(R.jsx)(v.a,{variant:"h6",noWrap:!0,className:o.title,children:i}),r.isRecording?Object(R.jsx)(S.a,{title:"Recording",children:Object(R.jsx)(V.a,{style:{color:"red",marginRight:"6px"}})}):null,s.isConnected?Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(g.a,{xsDown:!0,children:Object(R.jsx)(v.a,{variant:"body2",className:o.connection,children:"ID: ".concat(s.id)})}),Object(R.jsx)(v.a,{variant:"body2",className:o.state,children:d[c.overseerState]})]}):Object(R.jsx)(v.a,{variant:"body2",className:o.connection,children:"not connected"}),!s.isConnected&&""!==e.lastConnectedId&&Object(R.jsx)(P.a,{className:o.reconnect,variant:"contained",onClick:function(){return n("useRecentId")},children:"reconnect"}),s.isConnected&&N(c)?Object(R.jsx)(S.a,{title:"ERROR",children:Object(R.jsx)(y.a,{fontSize:"large",className:o.errorIcon})}):null,s.isConnected&&2===c.mechanicalBrake.brakeStatus&&Object(R.jsx)($,{className:o.brakeIcon,style:{color:A.a[500]}}),s.isConnected&&3===c.mechanicalBrake.brakeStatus&&Object(R.jsx)($,{className:o.brakeIcon,style:{color:J.a[500]}}),s.isConnected&&(1===c.overseerState||2===c.overseerState||7===c.overseerState||4===c.overseerState)&&Object(R.jsx)(P.a,{className:o.stop,variant:"contained",color:"secondary",onClick:function(){l.stop()},children:"stop"}),s.isConnected&&(5===c.overseerState||6===c.overseerState)&&Object(R.jsx)(P.a,{className:o.idle,variant:"contained",onClick:function(){l.idle()},children:"idle"})]})})}var Z=a(82),tt=a(324),et=a(325),at=a(330),it=Object(k.a)((function(t){return{title:{margin:t.spacing(1)},status:{margin:t.spacing(1)},textField:{width:"15.5rem",margin:t.spacing(1)},button:{margin:t.spacing(1)}}}));function rt(t){var e=t.networking,a=t.handleRobotConnect,r=t.handleRobotDisconnect,n=it(),o=Object(i.useState)(""),s=Object(Z.a)(o,2),c=s[0],l=s[1];return Object(R.jsx)(tt.a,{variant:"outlined",children:Object(R.jsxs)(et.a,{children:[Object(R.jsx)(v.a,{variant:"h5",className:n.title,children:"Robot Connection"}),Object(R.jsx)(v.a,{variant:"caption",display:"block",className:n.status,children:e.guiState.isConnected?"connected (ID: ".concat(e.guiState.id,")"):"not connected"}),Object(R.jsx)(at.a,{label:"Robot ID",variant:"outlined",className:n.textField,onChange:function(t){l(t.target.value)},onKeyDown:function(t){"Enter"===t.key&&a(c)}}),Object(R.jsx)("br",{}),Object(R.jsx)(P.a,{className:n.button,variant:"contained",color:"primary",onClick:function(){return a(c)},children:"Connect"}),Object(R.jsx)(P.a,{className:n.button,variant:"outlined",color:"primary",onClick:function(){return r()},children:"Disconnect"})]})})}var nt=a(326);function ot(t){var e=t.networking,a=t.handleRobotConnect,r=t.handleRobotDisconnect,n=t.setTopBarTitle;return Object(i.useEffect)((function(){n("Initial Setup")}),[n]),Object(R.jsx)(nt.a,{container:!0,spacing:2,justify:"center",alignItems:"flex-start",children:Object(R.jsx)(nt.a,{item:!0,children:Object(R.jsx)(rt,{networking:e,handleRobotConnect:a,handleRobotDisconnect:r})})})}var st=a(207),ct=a.n(st),lt=(a(264),a(339)),dt=a(327);const ht=Object(k.a)((t=>({root:{display:"inline-block",position:"absolute",marginLeft:t.spacing(1.5),marginTop:t.spacing(1.5),boxShadow:"3px 3px 5px rgba(0,0,0,0.2)",zIndex:1},title:{margin:t.spacing(1)},body:{margin:t.spacing(1)},pathSwitch:{marginLeft:0}})));function bt(t){let{pathRecorder:e,networking:a}=t;const i=ht();return Object(R.jsxs)(tt.a,{variant:"outlined",className:i.root,children:[Object(R.jsx)(v.a,{variant:"h6",className:i.title,children:"Recording Path"}),Object(R.jsxs)(v.a,{variant:"body1",className:i.body,children:["GPS Status: ",h[a.robotState.gps.status],Object(R.jsx)("br",{}),"Points Recorded: ",e.numberOfPoints]}),Object(R.jsx)(dt.a,{className:i.pathSwitch,control:Object(R.jsx)(lt.a,{checked:e.isRecordingLine,onChange:()=>e.toggleLineRecording(),color:"primary"}),label:"Record a line"})]})}class ut extends i.Component{constructor(){super(...arguments),this.circleDiameter=400,this.sender_thottle_time=100,this.previousTime=Date.now(),this.handleJoystickStart=(t,e)=>{},this.handleJoystickEnd=(t,e)=>{setTimeout((()=>{this.props.networking.senders.joystick(0,0)}),100)},this.handleJoystickMove=(t,e)=>{if(Date.now()-this.previousTime<this.sender_thottle_time)return;this.previousTime=Date.now();const a=e.distance/(.5*this.circleDiameter),i=e.angle.radian-Math.PI/2;this.props.networking.senders.joystick(a,i)}}render(){return Object(R.jsxs)("div",{children:[Object(R.jsx)("h3",{style:{marginTop:0,marginBottom:5},children:"Press and drag below to move the robot"}),Object(R.jsx)(S.a,{title:"Linear Velocity",children:Object(R.jsxs)("span",{style:{fontSize:16},children:["v: ",this.props.networking.robotState.robotVelocityCommand.v.toFixed(2)," m/s"]})}),Object(R.jsx)(S.a,{title:"Heading",children:Object(R.jsxs)("span",{style:{fontSize:16,marginLeft:16},children:["h: ",(this.props.networking.robotState.gps.heading/Math.PI*180).toFixed(0)," deg"]})}),Object(R.jsx)("br",{}),this.props.pathRecorder.isRecording?Object(R.jsx)(bt,{pathRecorder:this.props.pathRecorder,networking:this.props.networking}):null,Object(R.jsx)(ct.a,{className:"nipple",options:{mode:"dynamic",color:"blue",position:{top:"50%",left:"50%"},size:this.circleDiameter,nippleSize:90},style:{zIndex:0,outline:"1px dashed blue",width:"100%",height:"max( 100vh - 325px, 120px)",overflow:"hidden"},onStart:this.handleJoystickStart,onEnd:this.handleJoystickEnd,onMove:this.handleJoystickMove})]})}}var pt=a(208),jt=a.n(pt),gt=a(209),mt=a.n(gt),xt=a(210),ft=a.n(xt),vt=a(331),Ot=Object(k.a)((function(t){return{controlBox:{marginTop:t.spacing(1.5),marginBottom:t.spacing(1.5)},moveButton:{marginLeft:t.spacing(2)},rotateRightButton:{marginLeft:t.spacing(2)},rotateIcon:{marginLeft:t.spacing(1)},brakeIcon:{marginLeft:t.spacing(1),marginTop:5,fontSize:20}}})),yt=!1,St=!1;function kt(t){var e=t.networking,a=t.setTopBarTitle,r=t.pathRecorder,n=Ot(),o=e.robotState,s=e.senders;return Object(i.useEffect)((function(){a("Manual Control")}),[a]),Object(R.jsxs)("div",{style:{WebkitUserSelect:"none"},children:[0!==o.mechanicalBrake.brakeStatus&&1!==o.mechanicalBrake.brakeStatus&&2!==o.overseerState&&Object(R.jsxs)(P.a,{variant:"outlined",color:"primary",onPointerUp:function(){s.releaseMechanicalBrake()},children:["Release Mechanical Brake ",Object(R.jsx)($,{className:n.brakeIcon})]}),Object(R.jsxs)(vt.a,{children:[Object(R.jsx)(dt.a,{control:Object(R.jsx)(lt.a,{checked:1===o.overseerState,onChange:function(t){t.target.checked?s.enableManaul():s.stop()},color:"primary"}),label:"Enable Manual Control",disabled:2===o.overseerState||3===o.overseerState||6===o.overseerState}),Object(R.jsx)(dt.a,{control:Object(R.jsx)(lt.a,{checked:!0===o.doesBrakeWhenStopped,onChange:function(){s.toggleBrakeWhenStopped()},color:"primary"}),label:"Hold Motors When Not Moving"})]}),Object(R.jsxs)(vt.a,{className:n.controlBox,children:[Object(R.jsxs)(P.a,{variant:"outlined",color:"primary",onPointerDown:function(){yt=!0,s.spin(.3)},onPointerUp:function(){yt=!1,s.spin(0)},onPointerOut:function(){yt&&s.spin(0)},children:["spin ",Object(R.jsx)(jt.a,{className:n.rotateIcon})]}),Object(R.jsxs)(P.a,{className:n.rotateRightButton,variant:"outlined",color:"primary",onPointerDown:function(){yt=!0,s.spin(-.3)},onPointerUp:function(){yt=!1,s.spin(0)},onPointerOut:function(){yt&&s.spin(0)},children:["spin ",Object(R.jsx)(mt.a,{className:n.rotateIcon})]}),Object(R.jsxs)(P.a,{className:n.moveButton,variant:"outlined",color:"primary",onPointerDown:function(){St=!0,s.moveForward(.75)},onPointerUp:function(){St=!1,s.moveForward(0)},onPointerOut:function(){St&&s.moveForward(0)},children:["move ",Object(R.jsx)(ft.a,{className:n.rotateIcon})]})]}),Object(R.jsx)(ut,{networking:e,pathRecorder:r})]})}const wt=Object(k.a)((t=>({title:{margin:t.spacing(1)},body:{margin:t.spacing(1)},expand:{margin:"0 auto",paddingTop:0,paddingBottom:0,transform:"rotate(0deg)",marginLeft:"auto",transition:t.transitions.create("transform",{duration:t.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"},cardContent:{paddingBottom:0},errorIcon:{verticalAlign:"-3px",color:"red",fontSize:"17px"}})));function Nt(t){let{robotState:e}=t;const a=wt();return Object(R.jsx)(tt.a,{variant:"outlined",children:Object(R.jsxs)(et.a,{className:a.cardContent,children:[Object(R.jsx)(v.a,{variant:"h5",className:a.title,children:"General"}),Object(R.jsx)(v.a,{variant:"body1",className:a.body,children:"GUI Version: 1.4.1"}),Object(R.jsxs)(v.a,{variant:"body1",className:a.body,children:["Battery Voltage: ",e.batteryVoltage.toFixed(2),"V"]}),Object(R.jsxs)(v.a,{variant:"body1",className:a.body,children:["Battery Temperature: ",e.batteryTemperature,"F"," ",e.batteryTemperature>=140?Object(R.jsx)(y.a,{className:a.errorIcon}):null]}),Object(R.jsxs)(v.a,{variant:"body1",className:a.body,children:["Robot Internal Temperature: ",e.robotTemperature,"F"," ",e.robotTemperature>=140?Object(R.jsx)(y.a,{className:a.errorIcon}):null]}),Object(R.jsxs)(v.a,{variant:"body1",className:a.body,children:["Clients Connected to Robot: ",e.websocketClientCount]})]})})}const Ct=Object(k.a)((t=>({title:{margin:t.spacing(1)},body:{margin:t.spacing(1)},expand:{margin:"0 auto",paddingTop:0,paddingBottom:0,transform:"rotate(0deg)",marginLeft:"auto",transition:t.transitions.create("transform",{duration:t.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"},cardContent:{paddingBottom:0}})));function _t(t){let{robotState:e}=t;const a=Ct();return e.gps.diff_age>6e4?Object(R.jsx)(tt.a,{variant:"outlined",children:Object(R.jsxs)(et.a,{className:a.cardContent,children:[Object(R.jsx)(v.a,{variant:"h5",className:a.title,children:"GPS"}),Object(R.jsxs)(v.a,{variant:"body1",className:a.body,children:["Status: ",h[e.gps.status]]}),Object(R.jsxs)(v.a,{variant:"body1",className:a.body,children:["Latitdue (deg): ",e.gps.latitude.toFixed(7)]}),Object(R.jsxs)(v.a,{variant:"body1",className:a.body,children:["Longitude (deg): ",e.gps.longitude.toFixed(7)]}),Object(R.jsxs)(v.a,{variant:"body1",className:a.body,children:["Heading (deg): ",(e.gps.heading/Math.PI*180).toFixed(2)]}),Object(R.jsxs)(v.a,{variant:"body1",className:a.body,children:["Longitudinal Velocity (m/s): ","",(e.gps.northVelocity*Math.cos(e.gps.heading*Math.PI/180)+e.gps.eastVelocity*Math.sin(e.gps.heading*Math.PI/180)).toFixed(2)]}),Object(R.jsxs)(v.a,{variant:"body1",className:a.body,children:["Number of Satellites: ",e.gps.num_satellites]}),Object(R.jsx)(v.a,{variant:"body1",className:a.body,children:"Differential Age (ms): N/A"})]})}):Object(R.jsx)(tt.a,{variant:"outlined",children:Object(R.jsxs)(et.a,{className:a.cardContent,children:[Object(R.jsx)(v.a,{variant:"h5",className:a.title,children:"GPS"}),Object(R.jsxs)(v.a,{variant:"body1",className:a.body,children:["Status: ",h[e.gps.status]]}),Object(R.jsxs)(v.a,{variant:"body1",className:a.body,children:["Latitdue (deg): ",e.gps.latitude.toFixed(7)]}),Object(R.jsxs)(v.a,{variant:"body1",className:a.body,children:["Longitude (deg): ",e.gps.longitude.toFixed(7)]}),Object(R.jsxs)(v.a,{variant:"body1",className:a.body,children:["Heading (deg): ",(e.gps.heading/Math.PI*180).toFixed(2)]}),Object(R.jsxs)(v.a,{variant:"body1",className:a.body,children:["Longitudinal Velocity (m/s): ","",(e.gps.northVelocity*Math.cos(e.gps.heading*Math.PI/180)+e.gps.eastVelocity*Math.sin(e.gps.heading*Math.PI/180)).toFixed(2)]}),Object(R.jsxs)(v.a,{variant:"body1",className:a.body,children:["Number of Satellites: ",e.gps.num_satellites]}),Object(R.jsxs)(v.a,{variant:"body1",className:a.body,children:["Differential Age (ms): ",e.gps.diff_age]})]})})}const Rt=Object(k.a)((t=>({title:{margin:t.spacing(1)},body:{margin:t.spacing(1)},expand:{margin:"0 auto",paddingTop:0,paddingBottom:0,transform:"rotate(0deg)",marginLeft:"auto",transition:t.transitions.create("transform",{duration:t.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"},cardContent:{paddingBottom:0}})));function Tt(t){let{robotState:e}=t;const a=Rt();return e.mechanicalBrake.hasBrake?Object(R.jsx)(tt.a,{variant:"outlined",children:Object(R.jsxs)(et.a,{className:a.cardContent,children:[Object(R.jsx)(v.a,{variant:"h5",className:a.title,children:"Mechanical Brake"}),Object(R.jsxs)(v.a,{variant:"body1",className:a.body,children:["Has Brake: ",e.mechanicalBrake.hasBrake.toString()]}),Object(R.jsxs)(v.a,{variant:"body1",className:a.body,children:["Brake Status: ",e.mechanicalBrake.brakeStatus]})]})}):Object(R.jsx)(tt.a,{variant:"outlined",children:Object(R.jsxs)(et.a,{className:a.cardContent,children:[Object(R.jsx)(v.a,{variant:"h5",className:a.title,children:"Mechanical Brake"}),Object(R.jsxs)(v.a,{variant:"body1",className:a.body,children:["Has Brake: ",e.mechanicalBrake.hasBrake.toString()]})]})})}const Mt=Object(k.a)((t=>({title:{margin:t.spacing(1)},body:{margin:t.spacing(1)},errorIcon:{verticalAlign:"-3px",color:"red",fontSize:"17px"}})));function Ft(t){let{motorController:e,id:a,location:i}=t;const r=Mt();return Object(R.jsx)(tt.a,{variant:"outlined",children:Object(R.jsxs)(et.a,{children:[Object(R.jsxs)(v.a,{variant:"h5",className:r.title,children:["Motor Controller ",a]}),Object(R.jsxs)(v.a,{variant:"body1",className:r.body,children:["Error: ",b[e.errorWord]," ",0!==e.errorWord?Object(R.jsx)(y.a,{className:r.errorIcon}):null]}),Object(R.jsxs)(v.a,{variant:"body1",className:r.body,children:["Heartbeat Timeout: ",e.isHeartbeatTimeout.toString()," ",e.isHeartbeatTimeout?Object(R.jsx)(y.a,{className:r.errorIcon}):null]}),Object(R.jsxs)(v.a,{variant:"body1",className:r.body,children:["Winding Temperature (F): ",e.windingTemperature.toFixed(0)]})]})})}var Lt=Object(k.a)((function(t){return{title:{margin:t.spacing(1)},body:{margin:t.spacing(1)},expand:{margin:"0 auto",paddingTop:0,paddingBottom:0,transform:"rotate(0deg)",marginLeft:"auto",transition:t.transitions.create("transform",{duration:t.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"},cardContent:{paddingBottom:0},copyButton:{paddingTop:0,marginLeft:t.spacing(.5)}}}));function It(t){var e=t.robotState,a=Lt();return Object(R.jsx)(tt.a,{variant:"outlined",children:Object(R.jsxs)(et.a,{className:a.cardContent,children:[Object(R.jsx)(v.a,{variant:"h5",className:a.title,children:"Subject Vehicle"}),Object(R.jsxs)(v.a,{variant:"body1",className:a.body,children:["Latitude (deg): ",e.targetVehicle.latitude.toFixed(7)]}),Object(R.jsxs)(v.a,{variant:"body1",className:a.body,children:["Longitude (deg): ",e.targetVehicle.longitude.toFixed(7)]}),Object(R.jsxs)(v.a,{variant:"body1",className:a.body,children:["Heading (deg): ",e.targetVehicle.heading.toFixed(2)]}),Object(R.jsxs)(v.a,{variant:"body1",className:a.body,children:["Velocity (m/s): ",e.targetVehicle.velocity.toFixed(2)]}),Object(R.jsxs)(v.a,{variant:"body1",className:a.body,children:["GPS Ready: ",e.targetVehicle.gps_ready.toString()]}),Object(R.jsxs)(v.a,{variant:"body1",className:a.body,children:["GPS Correction Type: ",e.targetVehicle.gps_correction_type]})]})})}const Bt=Object(k.a)((t=>({title:{margin:t.spacing(1)},body:{margin:t.spacing(1)},expand:{margin:"0 auto",paddingTop:0,paddingBottom:0,transform:"rotate(0deg)",marginLeft:"auto",transition:t.transitions.create("transform",{duration:t.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"},cardContent:{paddingBottom:0}})));function Pt(t){let{robotState:e}=t;const a=Bt();return Object(R.jsx)(tt.a,{variant:"outlined",children:Object(R.jsxs)(et.a,{className:a.cardContent,children:[Object(R.jsx)(v.a,{variant:"h5",className:a.title,children:"License Information"}),Object(R.jsxs)(v.a,{variant:"body1",className:a.body,children:["Product Name: ",e.license_information.product_name]}),Object(R.jsxs)(v.a,{variant:"body1",className:a.body,children:["License Type: ",e.license_information.license_type]}),Object(R.jsxs)(v.a,{variant:"body1",className:a.body,children:["Issue Date: ",e.license_information.issue_date]}),Object(R.jsxs)(v.a,{variant:"body1",className:a.body,children:["Customer Name: ",e.license_information.customer_name]}),Object(R.jsxs)(v.a,{variant:"body1",className:a.body,children:["Features: ",e.license_information.features]})]})})}function Et(t){let{networking:e,setTopBarTitle:a}=t;const r=e.robotState;return Object(i.useEffect)((()=>{a("Robot Status")}),[a]),Object(R.jsxs)("div",{children:[Object(R.jsxs)(nt.a,{container:!0,spacing:2,alignItems:"flex-start",children:[Object(R.jsx)(nt.a,{item:!0,children:Object(R.jsx)(Nt,{robotState:r})}),Object(R.jsx)(nt.a,{item:!0,children:Object(R.jsx)(Pt,{robotState:r})}),Object(R.jsx)(nt.a,{item:!0,children:Object(R.jsx)(_t,{robotState:r})}),Object(R.jsx)(nt.a,{item:!0,children:Object(R.jsx)(It,{robotState:r})}),Object(R.jsx)(nt.a,{item:!0,children:Object(R.jsx)(Ft,{motorController:r.motorControllers.leftFront,id:1,location:"left_front"})}),Object(R.jsx)(nt.a,{item:!0,children:Object(R.jsx)(Ft,{motorController:r.motorControllers.leftBack,id:2,location:"left_back"})}),Object(R.jsx)(nt.a,{item:!0,children:Object(R.jsx)(Ft,{motorController:r.motorControllers.rightFront,id:3,location:"right_front"})}),Object(R.jsx)(nt.a,{item:!0,children:Object(R.jsx)(Ft,{motorController:r.motorControllers.rightBack,id:4,location:"right_back"})}),Object(R.jsx)(nt.a,{item:!0,children:Object(R.jsx)(Tt,{robotState:r})})]}),Object(R.jsx)(v.a,{variant:"h6",style:{marginTop:"15px"},children:"Error Log"}),Object(R.jsx)(vt.a,{mb:2,display:"flex",flexDirection:"column",height:"250px",style:{border:"2px solid lightgrey",overflow:"hidden",overflowY:"scroll",overflowX:"scroll",padding:"10px"},children:e.errorMessages.map((t=>Object(R.jsxs)("div",{children:[" ",t," "]},t)))})]})}var Dt=a(332),Vt=a(328),Wt=a(337),zt=a(333),Ht=a(140);const At=Object(k.a)((t=>({notes:{margin:t.spacing(1),marginBottom:t.spacing(3)},body:{margin:t.spacing(1)},button:{margin:t.spacing(1)}})));function Jt(t){let{networking:e,pathRecorder:a}=t;const r=At(),[n,o]=Object(i.useState)(!1);return Object(R.jsxs)("div",{children:[Object(R.jsx)(v.a,{variant:"body1",className:r.notes,children:Object(R.jsxs)("ul",{style:{margin:0,paddingLeft:20},children:[Object(R.jsx)("li",{children:"The GPS cordinates of the robot can be recorded here."}),Object(R.jsx)("li",{children:"Move the robot to create a path when recording starts."}),Object(R.jsx)("li",{children:"Tips for recording:"}),Object(R.jsxs)("ul",{children:[Object(R.jsx)("li",{children:"Since speed is not recorded, move robot slowly to accurately capture path."}),Object(R.jsx)("li",{children:"You may record path that has sharp corners. Robot can be programmed later to stop at the corner and rotate to the specified heading before moving again."})]})]})}),Object(R.jsx)(p.a,{}),Object(R.jsx)(v.a,{variant:"body1",className:r.body,children:a.isRecording?Object(R.jsx)("div",{children:a.recordMode?"Status: Recording Vehicle":"Status: Recording Robot"}):"Status: Not Recording"}),Object(R.jsxs)(v.a,{variant:"body1",className:r.body,children:["Points Recorded: ",a.numberOfPoints]}),Object(R.jsx)(P.a,{className:r.button,variant:"outlined",color:"primary",onClick:()=>{a.requestRecording()},children:"record robot"}),Object(R.jsx)(P.a,{className:r.button,variant:"outlined",color:"primary",onClick:()=>{a.requestVehicleRecording()},children:"record vehicle"}),Object(R.jsx)(P.a,{className:r.button,variant:"outlined",color:"primary",onClick:()=>{a.stopRecording()},children:"stop"}),Object(R.jsx)("br",{}),Object(R.jsx)(P.a,{className:r.button,variant:"outlined",color:"primary",onClick:()=>{!function(){let t="Global\n";for(let i=0;i<a.numberOfPoints;i++)t=t.concat(a.latitudes[i].toFixed(17).toString()," ",a.longitudes[i].toFixed(17).toString(),"\n");let e=new Blob([t],{type:"text/plain;charset=utf-8"});0===a.recordMode?Object(Ht.saveAs)(e,"stride_path.txt"):1===a.recordMode&&Object(Ht.saveAs)(e,"vehicle_path.txt")}()},children:"export To file"}),Object(R.jsx)("br",{}),Object(R.jsx)(Wt.a,{open:n,autoHideDuration:8e3,onClose:()=>{o(!1)},children:Object(R.jsx)(zt.a,{elevation:6,variant:"filled",severity:"info",children:"Go to the SHARED tab above in another connected device."})}),Object(R.jsx)(P.a,{className:r.button,variant:"outlined",color:"primary",onClick:()=>{o(!0),e.senders.sharePath(a.latitudes,a.longitudes)},children:"share with other devices"})]})}var Gt=a(73),Ut=a(59);const qt={width:"calc(min(100%, 90vh))",paddingTop:"calc((min(100%, 90vh)) - 15px)",position:"relative"},Xt={top:0,left:0,bottom:0,right:0,position:"absolute"};const Yt=new class{constructor(){this.latitudes=void 0,this.longitudes=void 0,this.easts=void 0,this.norths=void 0,this.E_factor=void 0,this.N_factor=void 0,this.lat_ref=void 0,this.long_ref=void 0,this.latitudes=[0],this.longitudes=[0],this.easts=[0],this.norths=[0],this.E_factor=0,this.N_factor=0,this.lat_ref=0,this.long_ref=0}importFromRecorder(t,e,a){this.latitudes=t,this.longitudes=e,this.easts=[],this.norths=[];const[i,r]=C(t[0]);this.E_factor=i,this.N_factor=r,this.lat_ref=t[0],this.long_ref=e[0];for(let n=0;n<t.length;n++){const[a,i]=_(t[n],e[n],this.lat_ref,this.long_ref,this.E_factor,this.N_factor);this.easts.push(i),this.norths.push(a)}a.current.data=this.createChartData()}isNumeric(t){return!isNaN(Number(t))&&!isNaN(parseFloat(t))}importFromFile(t,e){this.easts=[],this.norths=[],this.latitudes=[],this.longitudes=[];const a=t.current.files[0],i=new FileReader;i.addEventListener("load",(a=>{const i=a.target.result.split("\n");let r=1;for(const t of i){if(1===r){r++;continue}const e=t.split(/ |\t/);2===e.length&&this.isNumeric(e[0])&&this.isNumeric(e[1])&&(this.latitudes.push(Number(e[0])),this.longitudes.push(Number(e[1])))}const[n,o]=C(this.latitudes[0]);this.E_factor=n,this.N_factor=o,this.lat_ref=this.latitudes[0],this.long_ref=this.longitudes[0];for(let t=0;t<this.latitudes.length;t++){const[e,a]=_(this.latitudes[t],this.longitudes[t],this.lat_ref,this.long_ref,this.E_factor,this.N_factor);this.easts.push(a),this.norths.push(e)}t.current.value="",e.current.data=this.createChartData()})),i.readAsText(a)}createChartData(){const t=[];for(let e=0;e<this.easts.length;e++)t.push({ax:this.easts[e],ay:this.norths[e],aValue:e});return t}twoPointDistance(t,e,a,i){return Math.sqrt((a-t)**2+(i-e)**2)}},$t=Object(k.a)((t=>({body:{margin:t.spacing(1)},button:{margin:t.spacing(1)}})));function Kt(t){let{pathRecorder:e}=t;const a=$t(),r=Object(i.useRef)(),n=Object(i.useRef)();return Object(i.useLayoutEffect)((()=>{let t=Gt.d("chartdiv",Ut.e);t.paddingRight=20,t.data=Yt.createChartData();let e=t.xAxes.push(new Ut.d);e.renderer.minGridDistance=40,e.title.text="East",e.renderer.baseGrid.strokeOpacity=.3,e.renderer.baseGrid.strokeWidth=1;let a=t.yAxes.push(new Ut.d);a.title.text="North",a.renderer.baseGrid.strokeOpacity=.3,a.renderer.baseGrid.strokeWidth=1;let i=t.series.push(new Ut.c);i.dataFields.valueX="ax",i.dataFields.valueY="ay",i.dataFields.value="aValue",i.strokeWidth=2;let r=i.bullets.push(new Ut.b);return r.circle.radius=3,t.numberFormatter.numberFormat="#.##",r.tooltipText="[bold]Index {value}[/] ({valueX}, {valueY})",t.scrollbarX=new Gt.a,t.scrollbarY=new Gt.a,n.current=t,()=>{t.dispose()}}),[]),Object(R.jsxs)("div",{children:[Object(R.jsx)(P.a,{className:a.button,variant:"outlined",color:"primary",onClick:()=>{Yt.importFromRecorder(e.latitudes,e.longitudes,n)},children:"import from recorder"}),Object(R.jsxs)(P.a,{className:a.button,variant:"outlined",color:"primary",component:"label",children:["import from file",Object(R.jsx)("input",{type:"file",ref:r,onChange:()=>Yt.importFromFile(r,n),hidden:!0})]}),Object(R.jsx)("div",{style:qt,children:Object(R.jsx)("div",{id:"chartdiv",style:Xt})})]})}const Qt=Object(k.a)((t=>({notes:{margin:t.spacing(1),marginBottom:t.spacing(3)},body:{margin:t.spacing(1)},button:{margin:t.spacing(1)}})));function Zt(t){let{networking:e,pathRecorder:a}=t;const i=Qt(),r=e.receivedSharedPath;return Object(R.jsxs)("div",{children:[Object(R.jsx)(v.a,{variant:"body1",className:i.notes,children:"Shared path from another device will appear here."}),Object(R.jsxs)(v.a,{variant:"body1",className:i.body,children:["Time Received: ",r.timestamp," ",Object(R.jsx)("br",{}),"Number of Points: ",r.latitudes.length]}),Object(R.jsx)(P.a,{className:i.button,variant:"outlined",color:"primary",onClick:()=>{!function(){let t="Global\n";for(let a=0;a<r.latitudes.length;a++)t=t.concat(r.latitudes[a].toFixed(17).toString()," ",r.longitudes[a].toFixed(17).toString(),"\n");let e=new Blob([t],{type:"text/plain;charset=utf-8"});0===a.recordMode?Object(Ht.saveAs)(e,"stride_path.txt"):1===a.recordMode&&Object(Ht.saveAs)(e,"vehicle_path.txt")}()},children:"export To file"})]})}function te(t){const{children:e,value:a,index:i,...r}=t;return Object(R.jsx)("div",{role:"tabpanel",hidden:a!==i,id:`simple-tabpanel-${i}`,...r,children:a===i&&Object(R.jsx)(vt.a,{p:3,children:Object(R.jsx)(v.a,{children:e})})})}const ee=Object(k.a)((t=>({root:{backgroundColor:t.palette.background.paper},tab:{color:"rgb(64,64,64)"}})));function ae(t){let{networking:e,setTopBarTitle:a,pathRecorder:n}=t;const o=ee(),[s,c]=r.a.useState(0);return Object(i.useEffect)((()=>{a("Path")}),[a]),Object(R.jsxs)("div",{className:o.root,children:[Object(R.jsx)(B.a,{position:"static",color:"default",children:Object(R.jsxs)(Dt.a,{value:s,variant:"scrollable",scrollButtons:"auto",indicatorColor:"primary",textColor:"primary",onChange:(t,e)=>{c(e)},children:[Object(R.jsx)(Vt.a,{label:"Record",className:o.tab}),Object(R.jsx)(Vt.a,{label:"View",className:o.tab}),Object(R.jsx)(Vt.a,{label:"Shared",className:o.tab})]})}),Object(R.jsx)(te,{value:s,index:0,children:Object(R.jsx)(Jt,{networking:e,pathRecorder:n})}),Object(R.jsx)(te,{value:s,index:1,children:Object(R.jsx)(Kt,{pathRecorder:n})}),Object(R.jsx)(te,{value:s,index:2,children:Object(R.jsx)(Zt,{networking:e,pathRecorder:n})})]})}const ie=Object(k.a)((t=>({notes:{margin:t.spacing(1),marginBottom:t.spacing(3)},body:{margin:t.spacing(1)},button:{margin:t.spacing(1)},snackbar:{opacity:.9}})));function re(t){let{networking:e}=t;const a=ie(),r=Object(i.useRef)(),n=Object(i.useRef)(),o=Object(i.useRef)(),[s,c]=Object(i.useState)(!1);return Object(R.jsxs)("div",{children:[Object(R.jsx)(v.a,{variant:"body1",className:a.notes,children:"Note that the robot only stores the most recently uploaded path and script files."}),Object(R.jsxs)(v.a,{variant:"body1",className:a.body,children:["Path (.txt file): ",e.robotState.pathFollower.pathName," ",Object(R.jsx)("br",{}),"Vehicle Path (.txt file): ",e.robotState.pathFollower.vehiclePathName," ",Object(R.jsx)("br",{}),"Script (.py file): ",e.robotState.pathFollower.scriptName]}),Object(R.jsxs)(P.a,{className:a.button,variant:"outlined",color:"primary",component:"label",children:["upload path",Object(R.jsx)("input",{type:"file",ref:r,onChange:()=>{!function(){const t=r.current.files[0];if(r.current.value="","txt"!==t.name.split(".")[1])return void c(!0);const a=new FileReader;a.addEventListener("load",(a=>{const i=a.target.result;e.senders.uploadPath(t.name,i)})),a.readAsText(t)}()},hidden:!0})]}),Object(R.jsxs)(P.a,{className:a.button,variant:"outlined",color:"primary",component:"label",children:["upload vehicle path",Object(R.jsx)("input",{type:"file",ref:n,onChange:()=>{!function(){const t=n.current.files[0];if(n.current.value="","txt"!==t.name.split(".")[1])return void c(!0);const a=new FileReader;a.addEventListener("load",(a=>{const i=a.target.result;e.senders.uploadVehiclePath(t.name,i)})),a.readAsText(t)}()},hidden:!0})]}),Object(R.jsxs)(P.a,{className:a.button,variant:"outlined",color:"primary",component:"label",children:["upload script",Object(R.jsx)("input",{type:"file",ref:o,onChange:()=>{!function(){const t=o.current.files[0];if(o.current.value="","py"!==t.name.split(".")[1])return void c(!0);const a=new FileReader;a.addEventListener("load",(a=>{const i=a.target.result;e.senders.uploadScript(t.name,i)})),a.readAsText(t)}()},hidden:!0})]}),Object(R.jsx)(Wt.a,{className:a.snackbar,open:s,autoHideDuration:6e3,onClose:()=>{c(!1)},anchorOrigin:{vertical:"top",horizontal:"center"},children:Object(R.jsx)(zt.a,{elevation:6,variant:"filled",severity:"warning",children:"Incorrect file extension"})})]})}const ne={width:"calc(min(100%, 70vh))",paddingTop:"calc((min(100%, 70vh)) - 0px)",position:"relative"},oe={top:0,left:0,bottom:0,right:0,position:"absolute"};const se=new class{constructor(){this.latitudes=void 0,this.longitudes=void 0,this.easts=void 0,this.norths=void 0,this.vehicle_easts=void 0,this.vehicle_norths=void 0,this.E_factor=void 0,this.N_factor=void 0,this.lat_ref=void 0,this.long_ref=void 0,this.robot_east=void 0,this.robot_north=void 0,this.latitudes=[0],this.longitudes=[0],this.easts=[0],this.norths=[0],this.vehicle_easts=[0],this.vehicle_norths=[0],this.E_factor=0,this.N_factor=0,this.lat_ref=0,this.long_ref=0,this.robot_east=0,this.robot_north=0}plotPathSeries(t,e,a,i,r,n){if(!0===n||this.latitudes!==t&&void 0!==a.current){this.latitudes=t,this.longitudes=e,this.easts=[],this.norths=[];const[n,o]=C(t[0]);this.E_factor=n,this.N_factor=o,this.lat_ref=t[0],this.long_ref=e[0];for(let a=0;a<t.length;a++){const[i,r]=_(t[a],e[a],this.lat_ref,this.long_ref,this.E_factor,this.N_factor);this.easts.push(r),this.norths.push(i)}const s=Math.min(...this.easts),c=Math.max(...this.easts),l=Math.min(...this.norths),d=Math.max(...this.norths),h=Math.max(c-s,d-l);i.current.min=s-3,i.current.max=s+h+3,r.current.min=l-3,r.current.max=l+h+3,a.current.data=this.createPathSeriesData()}}createPathSeriesData(){const t=[];for(let e=0;e<this.easts.length;e++)t.push({ax:this.easts[e],ay:this.norths[e],aValue:e});return t}plotRobotSeries(t,e,a,i){if(void 0!==i.current){const[r,n]=_(t,e,this.lat_ref,this.long_ref,this.E_factor,this.N_factor);i.current.addData({bx:n,by:r,angle:a/Math.PI*180},1),this.robot_east=n,this.robot_north=r}}plotVehiclePathSeries(t,e,a,i,r,n,o,s){if(!0===s||this.latitudes!==t&&void 0!==r.current){this.latitudes=t,this.longitudes=e,this.vehicle_easts=[],this.vehicle_norths=[];const[s,c]=C(t[0]);this.E_factor=s,this.N_factor=c,this.lat_ref=a[0],this.long_ref=i[0];for(let a=0;a<t.length;a++){const[i,r]=_(t[a],e[a],this.lat_ref,this.long_ref,this.E_factor,this.N_factor);this.vehicle_easts.push(r),this.vehicle_norths.push(i)}const l=Math.min(...this.vehicle_easts),d=Math.max(...this.vehicle_easts),h=Math.min(...this.vehicle_norths),b=Math.max(...this.vehicle_norths),u=Math.max(d-l,b-h);n.current.min=l-3,n.current.max=l+u+3,o.current.min=h-3,o.current.max=h+u+3,r.current.data=this.createVehiclePathSeriesData()}}createVehiclePathSeriesData(){const t=[];for(let e=0;e<this.vehicle_easts.length;e++)t.push({cx:this.vehicle_easts[e],cy:this.vehicle_norths[e],cValue:e});return t}plotVehiclePositionSeries(t,e,a,i){if(void 0!==i.current){const[r,n]=_(t,e,this.lat_ref,this.long_ref,this.E_factor,this.N_factor);i.current.addData({dx:n,dy:r,veh_angle:a},1)}}},ce=Object(k.a)((t=>({notes:{margin:t.spacing(1)},body:{margin:t.spacing(1)},button:{margin:t.spacing(.5),padding:t.spacing(1),fontSize:11},messageBox:{maxHeight:10}})));function le(t){let{networking:e}=t;const a=ce(),[r,n]=Object(i.useState)(!1),o=Object(i.useRef)(),s=Object(i.useRef)(),c=Object(i.useRef)(),l=Object(i.useRef)(),d=Object(i.useRef)(),b=Object(i.useRef)(),u=Object(i.useRef)();return Object(i.useEffect)((()=>{const t=se.easts,e=se.norths;if(t.length>0&&e.length>0){const a=Math.min(...t),i=Math.max(...t),r=Math.min(...e),n=Math.max(...e);d.current&&b.current&&setTimeout((()=>{var t,e,o;d.current.min=a-3,d.current.max=i+3,b.current.min=r-3,b.current.max=n+3,null===(t=u.current)||void 0===t||t.invalidateRawData(),null===(e=u.current)||void 0===e||e.validateData(),null===(o=u.current)||void 0===o||o.validateLayout()}),100)}}),[]),se.plotRobotSeries(e.robotState.gps.latitude,e.robotState.gps.longitude,e.robotState.gps.heading,s),se.plotVehiclePositionSeries(e.robotState.targetVehicle.latitude,e.robotState.targetVehicle.longitude,e.robotState.targetVehicle.heading,l),Object(i.useLayoutEffect)((()=>{let t=Gt.d("chartdiv",Ut.e);u.current=t,t.paddingRight=20;let a=t.xAxes.push(new Ut.d);a.renderer.minGridDistance=40,a.title.text="East",a.renderer.baseGrid.strokeOpacity=.5,a.renderer.baseGrid.strokeWidth=1,a.strictMinMax=!0;let i=t.yAxes.push(new Ut.d);i.renderer.minGridDistance=40,i.title.text="North",i.renderer.baseGrid.strokeOpacity=.5,i.renderer.baseGrid.strokeWidth=1,i.strictMinMax=!0;let n=t.series.push(new Ut.c);n.dataFields.valueX="ax",n.dataFields.valueY="ay",n.dataFields.value="aValue",n.strokeWidth=2;let h=n.bullets.push(new Ut.b);h.circle.radius=3;let p=t.series.push(new Ut.c);p.dataFields.valueX="bx",p.dataFields.valueY="by",p.strokeWidth=2,p.stroke=Gt.c("red"),p.data=[{bx:0,by:0,angle:0},{bx:0,by:0,angle:0}];let j=p.bullets.push(new Ut.a);j.propertyFields.rotation="angle";let g=j.createChild(Gt.b);g.horizontalCenter="middle",g.verticalCenter="middle",g.direction="top",g.width=10,g.height=25,g.fill=Gt.c("#ffffff00"),g.strokeWidth=3,t.numberFormatter.numberFormat="#.##",h.tooltipText="[bold]Index {value}[/] ({valueX}, {valueY})";let m=t.series.push(new Ut.c);c.current=m,m.dataFields.valueX="cx",m.dataFields.valueY="cy",m.dataFields.value="cValue",m.strokeWidth=2,m.fill=Gt.c("orange"),m.stroke=Gt.c("orange");let x=m.bullets.push(new Ut.b);x.circle.radius=3,m.hidden=!r;let f=t.series.push(new Ut.c);f.dataFields.valueX="dx",f.dataFields.valueY="dy",f.strokeWidth=2,f.stroke=Gt.c("purple"),f.data=[{dx:0,dy:0,veh_angle:0},{dx:0,dy:0,veh_angle:0}];let v=f.bullets.push(new Ut.a);v.propertyFields.rotation="veh_angle";let O=v.createChild(Gt.b);return O.horizontalCenter="middle",O.verticalCenter="middle",O.direction="top",O.width=10,O.height=25,O.fill=Gt.c("#ffffff00"),O.strokeWidth=3,t.numberFormatter.numberFormat="#.##",x.tooltipText="[bold]Index {value}[/] ({valueX}, {valueY})",O.visible=r,o.current=n,s.current=p,c.current=m,l.current=f,d.current=a,b.current=i,se.plotPathSeries(e.pathToFollow.latitudes,e.pathToFollow.longitudes,o,d,b,!0),se.plotVehiclePathSeries(e.vehiclePathToFollow.latitudes,e.vehiclePathToFollow.longitudes,e.pathToFollow.latitudes,e.pathToFollow.longitudes,c,d,b,!0),()=>{t.dispose()}}),[e,r]),Object(R.jsxs)("div",{children:[Object(R.jsx)(P.a,{className:a.button,variant:"outlined",color:"primary",onClick:()=>{e.senders.startPathFollowing()},children:"start test"}),Object(R.jsx)(P.a,{className:a.button,variant:"outlined",color:"primary",onClick:()=>{e.senders.returnToStart()},children:"return to start position"}),Object(R.jsx)(P.a,{className:a.button,variant:"outlined",color:"primary",onClick:()=>{(()=>{const t=document.createElement("a");t.href=`http://195.0.0.${e.guiState.id}:3001/test-data.csv`,t.click()})()},children:"download test data"}),Object(R.jsxs)(v.a,{variant:"body2",className:a.body,children:["GPS status: ",h[e.robotState.gps.status],Object(R.jsx)("br",{}),"Robot Location: (",se.robot_east.toFixed(2),", ",se.robot_north.toFixed(2),")",Object(R.jsx)("br",{}),"Heading: ",(e.robotState.gps.heading/Math.PI*180).toFixed(0)," deg",Object(R.jsx)("br",{}),"Speed:"," ",Math.sqrt(e.robotState.gps.eastVelocity**2+e.robotState.gps.northVelocity**2).toFixed(2)," ","m/s"]}),Object(R.jsxs)("label",{children:[Object(R.jsx)("input",{type:"checkbox",checked:r,onChange:()=>{n((t=>{const e=!t;c.current&&(c.current.visible=e);const a=e?[...se.easts,...se.vehicle_easts]:[...se.easts],i=e?[...se.norths,...se.vehicle_norths]:[...se.norths];if(a.length>0&&i.length>0){const t=Math.min(...a),e=Math.max(...a),r=Math.min(...i),n=Math.max(...i);setTimeout((()=>{var a;d.current&&b.current&&(d.current.min=t-3,d.current.max=e+3,b.current.min=r-3,b.current.max=n+3,null===(a=u.current)||void 0===a||a.validateLayout())}),100)}return e}))}}),"Show Vehicle"]}),Object(R.jsx)("div",{style:ne,children:Object(R.jsx)("div",{id:"chartdiv",style:oe})}),Object(R.jsx)(v.a,{variant:"h6",style:{marginTop:"15px"},children:"Test Log"}),Object(R.jsx)(vt.a,{mb:2,display:"flex",flexDirection:"column",height:"250px",style:{border:"2px solid lightgrey",overflow:"hidden",overflowY:"scroll",overflowX:"scroll",padding:"10px"},children:e.testLogMessages.map((t=>Object(R.jsxs)("div",{children:[" ",t," "]},t)))})]})}function de(t){const{children:e,value:a,index:i,...r}=t;return Object(R.jsx)("div",{role:"tabpanel",hidden:a!==i,id:`simple-tabpanel-${i}`,...r,children:a===i&&Object(R.jsx)(vt.a,{p:3,children:Object(R.jsx)(v.a,{children:e})})})}const he=Object(k.a)((t=>({root:{backgroundColor:t.palette.background.paper},tab:{color:"rgb(64,64,64)"}})));function be(t){let{networking:e,setTopBarTitle:a,pathRecorder:n}=t;const o=he(),[s,c]=r.a.useState(0);return Object(i.useEffect)((()=>{a("Path Following")}),[a]),Object(R.jsxs)("div",{className:o.root,children:[Object(R.jsx)(B.a,{position:"static",color:"default",children:Object(R.jsxs)(Dt.a,{value:s,variant:"scrollable",scrollButtons:"auto",indicatorColor:"primary",textColor:"primary",onChange:(t,e)=>{c(e)},children:[Object(R.jsx)(Vt.a,{label:"prepare",className:o.tab}),Object(R.jsx)(Vt.a,{label:"test",className:o.tab})]})}),Object(R.jsx)(de,{value:s,index:0,children:Object(R.jsx)(re,{networking:e})}),Object(R.jsx)(de,{value:s,index:1,children:Object(R.jsx)(le,{networking:e})})]})}var ue=a(182),pe=a.n(ue),je=a(335),ge=Object(k.a)((function(t){return{TempInfoButton:{paddingBottom:1,paddingTop:0,marginLeft:t.spacing(1),color:"white"},TempInfoCard:{width:400},snackbar:{opacity:.85}}}));function me(t){var e=t.networking,a=ge(),r=Object(i.useState)(0),n=Object(Z.a)(r,2),o=n[0],s=n[1],c=Object(i.useState)(!1),l=Object(Z.a)(c,2),d=l[0],h=l[1],b=Object(i.useState)(!1),u=Object(Z.a)(b,2),p=u[0],j=u[1],g=Object(i.useState)(0),m=Object(Z.a)(g,2),x=m[0],f=m[1];Object(i.useEffect)((function(){var t=e.robotState.motorControllers,a=e.robotState,i=Math.max(t.leftBack.windingTemperature,t.leftFront.windingTemperature,t.rightBack.windingTemperature,t.rightFront.windingTemperature),r=Math.max(a.batteryTemperature,a.robotTemperature);s(i),f(r),h(i>185||r>140)}),[e.robotState]);return o>185&&x>140?Object(R.jsxs)("div",{children:[Object(R.jsx)(je.a,{style:{display:"flex",alignItems:"center",justifyContent:"center"},open:p,onClose:function(){return j(!1)},children:Object(R.jsx)(tt.a,{className:a.TempInfoCard,variant:"outlined",children:Object(R.jsx)(et.a,{children:Object(R.jsxs)(v.a,{variant:"body1",children:["\u2022Both the motor winding temperature and robot/battery temperature are approaching temperature thresholds. ",Object(R.jsx)("br",{}),"\u2022Upon the robot/battery temperature reaching the temperature threshold, robot operation will be disabled. ",Object(R.jsx)("br",{}),"\u2022Upon the motor winding temperature reaching its threshold, STRIDE will enter descender mode if it is on a hill, unless E-stopped, where it will hold until some more critical temperature threshold is reached. ",Object(R.jsx)("br",{}),"\u2022Avoid leaving the STRIDE E-stopped on a hill whenever possible. ",Object(R.jsx)("br",{})]})})})}),Object(R.jsx)(Wt.a,{className:a.snackbar,open:d,children:Object(R.jsxs)(zt.a,{elevation:6,variant:"filled",severity:"warning",children:["Motor Temp: ",o," / 185F",Object(R.jsx)(E.a,{className:a.TempInfoButton,size:"small",onClick:function(){j(!0)},children:Object(R.jsx)(pe.a,{})}),Object(R.jsx)("br",{})," Robot Temp: ",x," / 160F ",Object(R.jsx)("br",{})]})})]}):o>185&&x<=140?Object(R.jsxs)("div",{children:[Object(R.jsx)(je.a,{style:{display:"flex",alignItems:"center",justifyContent:"center"},open:p,onClose:function(){return j(!1)},children:Object(R.jsx)(tt.a,{className:a.TempInfoCard,variant:"outlined",children:Object(R.jsx)(et.a,{children:Object(R.jsxs)(v.a,{variant:"body1",children:["\u2022Upon the motor winding temperature reaching its threshold, STRIDE will enter descender mode if it is on a hill, unless E-stopped, where it will hold until some more critical temperature threshold is reached. ",Object(R.jsx)("br",{}),"\u2022Avoid leaving the STRIDE E-stopped on a hill whenever possible. ",Object(R.jsx)("br",{})]})})})}),Object(R.jsx)(Wt.a,{className:a.snackbar,open:d,anchorOrigin:{vertical:"bottom",horizontal:"center"},children:Object(R.jsxs)(zt.a,{elevation:6,variant:"filled",severity:"warning",children:["Motor Temp: ",o," / 185F",Object(R.jsx)(E.a,{className:a.TempInfoButton,size:"small",onClick:function(){j(!0)},children:Object(R.jsx)(pe.a,{})})]})})]}):o<=185&&x>140?Object(R.jsxs)("div",{children:[Object(R.jsx)(je.a,{style:{display:"flex",alignItems:"center",justifyContent:"center"},open:p,onClose:function(){return j(!1)},children:Object(R.jsx)(tt.a,{className:a.TempInfoCard,variant:"outlined",children:Object(R.jsx)(et.a,{children:Object(R.jsxs)(v.a,{variant:"body1",children:["Upon the robot/battery temperature reaching the temperature threshold, robot operation will be disabled. ",Object(R.jsx)("br",{})]})})})}),Object(R.jsx)(Wt.a,{className:a.snackbar,open:d,anchorOrigin:{vertical:"bottom",horizontal:"center"},children:Object(R.jsxs)(zt.a,{elevation:6,variant:"filled",severity:"warning",children:["Robot Temp: ",x," / 160F",Object(R.jsx)(E.a,{className:a.TempInfoButton,size:"small",onClick:function(){j(!0)},children:Object(R.jsx)(pe.a,{})})]})})]}):null}var xe=Object(k.a)((function(t){return{snackbar:{opacity:.85}}}));function fe(t){var e=t.networking,a=xe(),r=Object(i.useState)(!1),n=Object(Z.a)(r,2),o=n[0],s=n[1];return Object(i.useEffect)((function(){!0===e.isNewTestDataReady&&(s(!0),e.isNewTestDataReady=!1)}),[s,e,e.isNewTestDataReady]),Object(R.jsx)("div",{children:Object(R.jsx)(Wt.a,{className:a.snackbar,open:o,autoHideDuration:5e3,onClose:function(){s(!1)},anchorOrigin:{vertical:"top",horizontal:"center"},children:Object(R.jsx)(zt.a,{elevation:6,variant:"filled",severity:"info",children:"Test Data Ready for Download"})})})}function ve(){return{top:"".concat(50,"%"),left:"".concat(50,"%"),transform:"translate(-".concat(50,"%, -").concat(50,"%)")}}var Oe=Object(k.a)((function(t){return{paper:{position:"absolute",width:400,backgroundColor:t.palette.background.paper,padding:t.spacing(2,4,3)}}}));function ye(t){var e=t.networking,a=Oe(),n=r.a.useState(ve),o=Object(Z.a)(n,1)[0],s=Object(i.useState)(!1),c=Object(Z.a)(s,2),l=c[0],d=c[1],h=Object(R.jsx)("div",{style:o,className:a.paper,children:Object(R.jsx)("h3",{children:"The micro-controller requires a reset. Please move robot to flat ground and press the reset button."})});return Object(i.useEffect)((function(){d(!e.robotState.portentaHeartbeat)}),[e.robotState.portentaHeartbeat]),Object(R.jsx)("div",{children:Object(R.jsx)(je.a,{open:l,children:h})})}var Se=a(329);let ke=new u("",!1);const we=new class{constructor(){this.isRecording=void 0,this.isRecordingLine=void 0,this.hasBeenRecordingLine=void 0,this.pointDistance=void 0,this.latitudes=void 0,this.longitudes=void 0,this.priorLatitude=void 0,this.priorLongitude=void 0,this.latRef=void 0,this.longRef=void 0,this.E_factor=void 0,this.N_factor=void 0,this.recorderId=void 0,this.numberOfPoints=void 0,this.recordMode=void 0,this.isRecording=!1,this.isRecordingLine=!1,this.hasBeenRecordingLine=!1,this.pointDistance=.3,this.latitudes=[],this.longitudes=[],this.priorLatitude=-1,this.priorLongitude=-1,this.latRef=-1,this.longRef=-1,this.E_factor=0,this.N_factor=0,this.recorderId=0,this.numberOfPoints=0,this.recordMode=0}requestRecording(){this.isRecording=!0,this.isRecordingLine=!1,this.hasBeenRecordingLine=!1,this.latitudes=[],this.longitudes=[],this.priorLatitude=-1,this.priorLongitude=-1,this.numberOfPoints=0,this.recordMode=0}requestVehicleRecording(){this.isRecording=!0,this.isRecordingLine=!1,this.hasBeenRecordingLine=!1,this.latitudes=[],this.longitudes=[],this.priorLatitude=-1,this.priorLongitude=-1,this.numberOfPoints=0,this.recordMode=1}stopRecording(){this.isRecording=!1,this.isRecordingLine=!1}toggleLineRecording(){this.isRecordingLine=!this.isRecordingLine}recordWhenRequested(t,e){if(this.isRecording){const c=this.haversine(this.priorLatitude,t,this.priorLongitude,e);if(-1===this.priorLatitude||-1===this.priorLongitude){this.priorLatitude=t,this.priorLongitude=e,this.latitudes.push(t),this.longitudes.push(e),this.numberOfPoints+=1,this.latRef=t,this.longRef=e;const a=C(this.latRef);this.E_factor=a[0],this.N_factor=a[1]}else if(this.isRecordingLine)this.hasBeenRecordingLine=!0;else if(this.hasBeenRecordingLine){this.hasBeenRecordingLine=!1;const[c,l]=_(this.priorLatitude,this.priorLongitude,this.latRef,this.longRef,this.E_factor,this.N_factor),[d,h]=_(t,e,this.latRef,this.longRef,this.E_factor,this.N_factor),b=((c-d)**2+(l-h)**2)**.5,u=Math.floor(b/this.pointDistance);for(let t=1;t<=u;t++){const e=c+t/u*(d-c),b=l+t/u*(h-l),[p,j]=(a=e,i=b,r=this.latRef,n=this.longRef,o=this.E_factor,s=this.N_factor,[a/s+r,i/o+n]);this.latitudes.push(p),this.longitudes.push(j),this.numberOfPoints+=1,this.priorLatitude=p,this.priorLongitude=j}}else c>this.pointDistance&&(this.latitudes.push(t),this.longitudes.push(e),this.numberOfPoints+=1,this.priorLatitude=t,this.priorLongitude=e)}var a,i,r,n,o,s}haversine(t,e,a,i){const r=t/180*Math.PI,n=e/180*Math.PI,o=a/180*Math.PI,s=n-r,c=i/180*Math.PI-o;return 6371008*Math.sqrt(s**2+Math.cos(r)*Math.cos(n)*c**2)}},Ne=Object(k.a)((t=>({toolbar:t.mixins.toolbar,content:{[t.breakpoints.up("md")]:{width:"calc(100% - 185px)",marginLeft:l},padding:t.spacing(3)}})));function Ce(){const t=Ne(),[,e]=Object(i.useState)({}),[a,r]=Object(i.useState)(""),[n,o]=Object(i.useState)(!1);function l(t){"useRecentId"===t?(ke.socket.close(),ke=new u(ke.lastConnectedId,ke.isConnectedOnce)):(ke.socket.close(),ke=new u(t,!1))}return Object(i.useEffect)((()=>{const t=setInterval((()=>{e({});const t=ke.robotState.gps.latitude,a=ke.robotState.gps.longitude,i=ke.robotState.targetVehicle.latitude,r=ke.robotState.targetVehicle.longitude;0===we.recordMode?we.recordWhenRequested(t,a):1===we.recordMode&&we.recordWhenRequested(i,r)}),100);return()=>{clearInterval(t)}}),[]),Object(R.jsxs)(s.a,{children:[Object(R.jsx)(Se.a,{}),Object(R.jsx)(ye,{networking:ke}),Object(R.jsx)(me,{networking:ke}),Object(R.jsx)(fe,{networking:ke}),Object(R.jsx)(Q,{networking:ke,setMobileOpen:o,topBarTitle:a,pathRecorder:we,handleRobotConnect:l}),Object(R.jsx)(M,{networking:ke,mobileOpen:n,setMobileOpen:o}),Object(R.jsxs)("main",{className:t.content,children:[Object(R.jsx)("div",{className:t.toolbar}),Object(R.jsxs)(c.d,{children:[Object(R.jsx)(c.b,{path:"/",exact:!0,children:Object(R.jsx)(c.a,{to:"/initialsetup"})}),Object(R.jsx)(c.b,{path:"/initialsetup",children:Object(R.jsx)(ot,{networking:ke,handleRobotConnect:l,handleRobotDisconnect:function(){ke.socket.close()},setTopBarTitle:r})}),Object(R.jsx)(c.b,{path:"/manualcontrol",children:Object(R.jsx)(kt,{networking:ke,setTopBarTitle:r,pathRecorder:we})}),Object(R.jsx)(c.b,{path:"/robotstatus",children:Object(R.jsx)(Et,{networking:ke,setTopBarTitle:r})}),Object(R.jsx)(c.b,{path:"/path",children:Object(R.jsx)(ae,{networking:ke,setTopBarTitle:r,pathRecorder:we})}),Object(R.jsx)(c.b,{path:"/pathfollowing",children:Object(R.jsx)(be,{networking:ke,setTopBarTitle:r,pathRecorder:we})})]})]})]})}var _e=function(t){t&&t instanceof Function&&a.e(7).then(a.bind(null,547)).then((function(e){var a=e.getCLS,i=e.getFID,r=e.getFCP,n=e.getLCP,o=e.getTTFB;a(t),i(t),r(t),n(t),o(t)}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(Object(R.jsx)(r.a.StrictMode,{children:Object(R.jsx)(Ce,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)})),_e()}},[[271,1,3]]]);
//# sourceMappingURL=main.bc0100d2.chunk.js.map