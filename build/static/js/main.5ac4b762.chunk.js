(this.webpackJsonpstride=this.webpackJsonpstride||[]).push([[0],{246:function(t,e,a){},247:function(t,e,a){},282:function(t,e,a){"use strict";a.r(e);var n=a(2),i=a.n(n),r=a(38),o=a.n(r),s=(a(246),a(34)),c=a(75),l=(a(247),a(197)),d=a(49),h=185,u={0:"Initial",1:"Manual",2:"Auto",3:"E-Stopped",5:"Stopped",6:"Decending",7:"Idle"},b={0:"not ready to switch on",64:"switch on disabled",33:"ready to switch on",35:"switched on",39:"operation enabled",7:"quick stop active",15:"fault reaction active",8:"fault"},p={0:"boot up",4:"stopped",5:"operational",127:"pre-operational"},j={0:"No Fix",1:"2D Fix",2:"3D Fix",3:"SBAS Fix",4:"Differential Fix",5:"Ominster/Starfire Fix",6:"RTK Float Fix",7:"RTK Integer Fix"},g={0:"None",1:"SpeedDeviationError",2:"FollowingError",4:"OverVoltageError",8:"UnderVoltageError",16:"TempWarning",32:"TempError",64:"Encoder error",128:"Int HW error",512:"Current Measurement Error",2048:"Com error",4096:"Calc error",8192:"Dynamic Limit",16384:"Safety monitor error"},m=a(181),f=a(90),x=function t(e,a){var n=this;Object(f.a)(this,t),this.guiState=void 0,this.robotState=void 0,this.socket=void 0,this.senders=void 0,this.dataArrivalTime=void 0,this.intervalId1=void 0,this.intervalId2=void 0,this.receivedSharedPath=void 0,this.pathToFollow=void 0,this.lastConnectedId=void 0,this.isConnectedOnce=void 0,this.isNewTestDataReady=void 0,this.testLogMessages=void 0,this.errorMessages=void 0,a?(this.lastConnectedId=e,this.isConnectedOnce=!0):(this.lastConnectedId="",this.isConnectedOnce=!1),this.guiState={isConnected:!1,id:e},this.robotState={type:"robotState",robotVelocityCommand:{v:0,w:0},robotTurningRadius:0,overseerState:0,websocketClientCount:0,doesBrakeWhenStopped:!1,robotTemperature:0,batteryTemperature:0,batteryVoltage:0,motorControllers:{leftFront:{state:0,heartbeatNmt:0,isHeartbeatTimeout:!1,motorCurrentDraw:0,wheelRpmActual:0,errorWord:0,windingTemperature:0},leftBack:{state:0,heartbeatNmt:0,isHeartbeatTimeout:!1,motorCurrentDraw:0,wheelRpmActual:0,errorWord:0,windingTemperature:0},rightFront:{state:0,heartbeatNmt:0,isHeartbeatTimeout:!1,motorCurrentDraw:0,wheelRpmActual:0,errorWord:0,windingTemperature:0},rightBack:{state:0,heartbeatNmt:0,isHeartbeatTimeout:!1,motorCurrentDraw:0,wheelRpmActual:0,errorWord:0,windingTemperature:0}},gps:{status:-1,latitude:0,longitude:0,northVelocity:0,eastVelocity:0,zAngularVelocity:0,systemStatus:0,filterStatus:0,heading:0,magneticCalibrationStatus:0,magneticCalibrationProgress:0,magneticCalibrationError:0},pathFollower:{pathName:"",scriptName:""},targetVehicle:{latitude:0,longitude:0,heading:0,velocity:0,gps_ready:!1,gps_correction_type:0}},this.receivedSharedPath={timestamp:"",latitudes:[],longitudes:[]},this.pathToFollow={latitudes:[],longitudes:[]},this.isNewTestDataReady=!1,this.testLogMessages=[],this.errorMessages=[],this.dataArrivalTime=0;try{this.socket="localhost"===e?new WebSocket("ws://localhost:9000"):"999"===e?new WebSocket("ws://192.168.1.129:9000"):new WebSocket("ws://195.0.0."+e+":9000")}catch(i){console.error(i),this.socket=new WebSocket("ws://0.0.0.0")}this.socket.onopen=function(t){n.guiState.isConnected=!0,n.dataArrivalTime=Date.now(),n.lastConnectedId=n.guiState.id,n.isConnectedOnce=!0,n.intervalId1=setInterval((function(){Date.now()-n.dataArrivalTime>4e3&&(n.guiState.isConnected=!1,n.socket.close())}),250),n.intervalId2=setInterval((function(){n.senders.heartbeat()}),200)},this.socket.onmessage=function(t){n.dataArrivalTime=Date.now();var e=JSON.parse(t.data);if("robotState"===e.type)n.robotState=e;else if("sharedPath"===e.type){var a=(new Date).toLocaleTimeString();n.receivedSharedPath={timestamp:a,latitudes:e.latitudes,longitudes:e.longitudes}}else if("/path_follower/path_to_follow"===e.type)n.pathToFollow.latitudes=e.latitudes,n.pathToFollow.longitudes=e.longitudes;else if("createdCSV"===e.type)n.isNewTestDataReady=!0;else if("commandMessage"===e.type)n.testLogMessages.push(e.commandMessage);else if("errorMessage"===e.type){var i,r=e.errorMessage.split(/\r?\n/),o=Object(m.a)(r);try{for(o.s();!(i=o.n()).done;){var s=i.value;2===n.robotState.overseerState&&n.testLogMessages.push(s),n.errorMessages.push(s)}}catch(c){o.e(c)}finally{o.f()}}},this.socket.onclose=function(t){n.guiState.isConnected=!1,clearInterval(n.intervalId1),clearInterval(n.intervalId2)},this.senders={joystick:function(t,e){var a={type:"/joystick",travel:t,angle:e};n.guiState.isConnected&&n.socket.send(JSON.stringify(a))},spin:function(t){var e={type:"/robot_velocity_command",x:0,theta:t};n.guiState.isConnected&&1===n.robotState.overseerState&&n.socket.send(JSON.stringify(e))},moveForward:function(t){var e={type:"/robot_velocity_command",x:t,theta:0};n.guiState.isConnected&&1===n.robotState.overseerState&&n.socket.send(JSON.stringify(e))},stop:function(){n.guiState.isConnected&&n.socket.send(JSON.stringify({type:"/gui/stop_clicked"}))},enableManaul:function(){n.guiState.isConnected&&n.socket.send(JSON.stringify({type:"/gui/enable_manual_clicked"}))},idle:function(){n.guiState.isConnected&&n.socket.send(JSON.stringify({type:"/gui/idle_clicked"}))},heartbeat:function(){n.socket.readyState===WebSocket.OPEN&&n.socket.send(JSON.stringify({type:"/gui/heartbeat"}))},toggleBrakeWhenStopped:function(){n.guiState.isConnected&&n.socket.send(JSON.stringify({type:"/gui/brake_when_stopped_toggled"}))},setMagneticCalibration:function(t){var e={type:"/an_device/magnetic_calibration/calibrate",method:t};n.guiState.isConnected&&n.socket.send(JSON.stringify(e))},sharePath:function(t,e){var a={type:"sharedPath",latitudes:t,longitudes:e};n.guiState.isConnected&&n.socket.send(JSON.stringify(a))},startPathFollowing:function(){n.guiState.isConnected&&n.socket.send(JSON.stringify({type:"/gui/start_path_following_clicked"}))},uploadPath:function(t,e){if("txt"===t.split(".")[1]){var a={type:"/gui/upload_path_clicked",filename:t,fileContent:e};n.socket.send(JSON.stringify(a))}},uploadScript:function(t,e){if("py"===t.split(".")[1]){var a={type:"/gui/upload_script_clicked",filename:t,fileContent:e};n.socket.send(JSON.stringify(a))}},returnToStart:function(){n.guiState.isConnected&&n.socket.send(JSON.stringify({type:"/gui/return_to_start_clicked"}))}}},O=a(323),v=a(348),y=a(346),w=a(324),S=a(325),k=a(326),C=a(157),N=a(128),R=a.n(N),T=a(350),F=a(320),A=a(44);function M(t){return 0!==t.motorControllers.leftFront.errorWord&&64!==t.motorControllers.leftFront.errorWord||t.motorControllers.leftFront.isHeartbeatTimeout||0!==t.motorControllers.leftBack.errorWord&&64!==t.motorControllers.leftBack.errorWord||t.motorControllers.leftBack.isHeartbeatTimeout||0!==t.motorControllers.rightFront.errorWord&&64!==t.motorControllers.rightFront.errorWord||t.motorControllers.rightFront.isHeartbeatTimeout||0!==t.motorControllers.rightBack.errorWord&&64!==t.motorControllers.rightBack.errorWord||t.motorControllers.rightBack.isHeartbeatTimeout}function _(t){var e=.0818191908426,a=6378137,n=Math.PI,i=Math.sin,r=Math.cos,o=Math.sqrt;return[r(t*n/180)*a/o(1-Math.pow(i(t*n/180),2)*Math.pow(e,2))*n/180,(1-Math.pow(e,2))*a/((1-Math.pow(i(t*n/180),2)*Math.pow(e,2))*o(1-Math.pow(i(t*n/180),2)*Math.pow(e,2)))*n/180]}function B(t,e,a,n,i,r){return[(t-a)*r,(e-n)*i]}var L=a(6),P=Object(F.a)((function(t){return{toolbar:t.mixins.toolbar,drawerPaper:{width:h},logo:{paddingTop:10},list:{padding:0},errorIcon:{color:"red"}}}));function I(t){var e=t.networking,a=t.mobileOpen,n=t.setMobileOpen,i=P(),r=Object(A.a)(),o=Object(d.g)(),s=[{text:"Initial Setup",onClick:function(){o.push("/initialsetup"),n(!1)},canShowErrorIcon:!1},{text:"Manual Control",onClick:function(){o.push("/manualcontrol"),n(!1)},canShowErrorIcon:!1},{text:"Robot Status",onClick:function(){o.push("/robotstatus"),n(!1)},canShowErrorIcon:!0},{text:"Path",onClick:function(){o.push("/path"),n(!1)},canShowErrorIcon:!1},{text:"Path Following",onClick:function(){o.push("/pathfollowing"),n(!1)},canShowErrorIcon:!1},{text:"Configuration",onClick:function(){o.push("/configuration"),n(!1)},canShowErrorIcon:!1}],c=Object(L.jsxs)("div",{children:[Object(L.jsx)("div",{className:i.toolbar,children:Object(L.jsx)(C.a,{variant:"h4",align:"center",color:"primary",className:i.logo,children:"STRIDE"})}),Object(L.jsx)(O.a,{}),Object(L.jsx)(w.a,{className:i.list,children:s.map((function(t){var a=t.text,n=t.onClick,r=t.canShowErrorIcon;return Object(L.jsxs)(S.a,{button:!0,onClick:n,children:[Object(L.jsx)(k.a,{primary:a}),r&&M(e.robotState)&&e.guiState.isConnected?Object(L.jsx)(T.a,{title:"ERROR",children:Object(L.jsx)(R.a,{className:i.errorIcon})}):null]},a)}))})]});return Object(L.jsxs)("nav",{"aria-label":"mailbox folders",children:[Object(L.jsx)(y.a,{mdUp:!0,implementation:"css",children:Object(L.jsx)(v.a,{variant:"temporary",anchor:"rtl"===r.direction?"right":"left",open:a,onClose:function(){return n(!1)},classes:{paper:i.drawerPaper},ModalProps:{keepMounted:!0},children:c})}),Object(L.jsx)(y.a,{smDown:!0,implementation:"css",children:Object(L.jsx)(v.a,{classes:{paper:i.drawerPaper},variant:"permanent",open:!0,children:c})})]})}var E=a(330),D=a(333),V=a(332),W=a(215),J=a.n(W),z=a(214),H=a.n(z),G=a(331),U=Object(F.a)((function(t){return{appBar:Object(c.a)({},t.breakpoints.up("md"),{width:"calc(100% - ".concat(h,"px)"),marginLeft:h}),title:{marginRight:"auto"},menuButton:Object(c.a)({},t.breakpoints.up("md"),{display:"none"}),stop:{marginLeft:t.spacing(1.5)},start:{backgroundColor:"green",color:"white",marginLeft:t.spacing(1.5),"&:hover":{background:"darkgreen"}},connection:{color:"lightgray"},state:{marginLeft:t.spacing(1.5),color:"lightgray"},errorIcon:{marginLeft:t.spacing(1.5),color:"red"},reconnect:{marginLeft:t.spacing(1.5),backgroundColor:"green",color:"white","&:hover":{backgroundColor:"darkgreen"}},idle:{marginLeft:t.spacing(1.5),backgroundColor:"green",color:"white","&:hover":{backgroundColor:"darkgreen"}}}}));function Y(t){var e=t.networking,a=t.setMobileOpen,n=t.topBarTitle,i=t.pathRecorder,r=t.handleRobotConnect,o=U(),s=e.guiState,c=e.robotState,l=e.senders;return Object(L.jsx)(E.a,{position:"fixed",className:o.appBar,children:Object(L.jsxs)(G.a,{children:[Object(L.jsx)(V.a,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:function(){return a(!0)},className:o.menuButton,children:Object(L.jsx)(H.a,{})}),Object(L.jsx)(C.a,{variant:"h6",noWrap:!0,className:o.title,children:n}),5===c.gps.magneticCalibrationStatus?Object(L.jsx)(T.a,{title:"Calibrating GPS",children:Object(L.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAA3QAAAN0BcFOiBwAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAJoSURBVFiF7Zc9TBNhHMZ/7330ruEjFWig9QsTVyOJ2uJg4mLcEAeJi5s7Dg4uxsXJxMFNF5VBBhY7OBmVaJSklbiAgwQCRAippGoCleLd9e9AoRVo78CoDH2my/2f93l+yfvm3pwSEWZmZiK2bX/DRyJyMRaLpWp5xsYmepWSp35Zrmvt6+rq/K75Gf+26gB1gP8OYABEBgYwGhsdNM2sZlTgiabp9PfXDIzfvnVIX/wiKKWqZjlOwTiw32JwsASQSkEoVLW8JB3w/AAaXg/HvGy2anlJth6L2bAHtqAOUAeoA+wRAF2Xf10sShXLAE1NeaAYYN1BP4PmukeDAIRDocUywPCwCywGWHfaz1B0nFN+HmUYRaanC2UAAJH5AACXSCZPVhs68fgVb2npcACAwvpz5SF8EwDAAIbo7u7ePCh0dFx1crmHiP9x0mz7U2XgulLAtQAQRxB5RyLxDKXShamps6yuHvOWlzsCrF0DsKzHWwE6O98yO/uZAAcN0FCqB+jxcrmgvQAo0/TMtrb75aB1DQ15wM0dpe1CeiTyiPHxnxtAUrlnSmkkEh+A40ED85lM4HLNtlfChUIzIu7Gu98cIkWgD/D9S9qplK6L2dLSW1m+FQAgnZ5ApA9wt8x23a4wWltvGPPzzzePtr8LMpkXwHng6x93G4YY0ej1UDZ7Z7t59csonX6FrieB97st18LhvNbefs7KZu9W9dRMGBmZJJNJInIZmAxarEIhJxSN3guvrDTbc3Mva3olwJdrzakUicQJlLqAyBkgDsR+jI42YJquMoy8sqyPumU9MBcWnpQOtK9+AYcouoyMUpY4AAAAAElFTkSuQmCC",style:{width:"25px",height:"25px",marginRight:"6px"}})}):null,i.isRecording?Object(L.jsx)(T.a,{title:"Recording",children:Object(L.jsx)(J.a,{style:{color:"red",marginRight:"6px"}})}):null,s.isConnected?Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(y.a,{xsDown:!0,children:Object(L.jsx)(C.a,{variant:"body2",className:o.connection,children:"ID: ".concat(s.id)})}),Object(L.jsx)(C.a,{variant:"body2",className:o.state,children:u[c.overseerState]})]}):Object(L.jsx)(C.a,{variant:"body2",className:o.connection,children:"not connected"}),!s.isConnected&&""!==e.lastConnectedId&&Object(L.jsx)(D.a,{className:o.reconnect,variant:"contained",onClick:function(){return r("useRecentId")},children:"reconnect"}),s.isConnected&&M(c)?Object(L.jsx)(T.a,{title:"ERROR",children:Object(L.jsx)(R.a,{fontSize:"large",className:o.errorIcon})}):null,s.isConnected&&(1===c.overseerState||2===c.overseerState||7===c.overseerState||4===c.overseerState)&&Object(L.jsx)(D.a,{className:o.stop,variant:"contained",color:"secondary",onClick:function(){l.stop()},children:"stop"}),s.isConnected&&(5===c.overseerState||6===c.overseerState)&&Object(L.jsx)(D.a,{className:o.idle,variant:"contained",onClick:function(){l.idle()},children:"idle"})]})})}var X=a(334),q=a(335),Z=a(342),K=Object(F.a)((function(t){return{title:{margin:t.spacing(1)},status:{margin:t.spacing(1)},textField:{width:"15.5rem",margin:t.spacing(1)},button:{margin:t.spacing(1)}}}));function Q(t){var e=t.networking,a=t.handleRobotConnect,i=t.handleRobotDisconnect,r=K(),o=Object(n.useState)(""),c=Object(s.a)(o,2),l=c[0],d=c[1];return Object(L.jsx)(X.a,{variant:"outlined",children:Object(L.jsxs)(q.a,{children:[Object(L.jsx)(C.a,{variant:"h5",className:r.title,children:"Robot Connection"}),Object(L.jsx)(C.a,{variant:"caption",display:"block",className:r.status,children:e.guiState.isConnected?"conntected (ID: ".concat(e.guiState.id,")"):"not connected"}),Object(L.jsx)(Z.a,{label:"Robot ID",variant:"outlined",className:r.textField,onChange:function(t){d(t.target.value)},onKeyDown:function(t){"Enter"===t.key&&a(l)}}),Object(L.jsx)("br",{}),Object(L.jsx)(D.a,{className:r.button,variant:"contained",color:"primary",onClick:function(){return a(l)},children:"Connect"}),Object(L.jsx)(D.a,{className:r.button,variant:"outlined",color:"primary",onClick:function(){return i()},children:"Disconnect"})]})})}var $=Object(F.a)((function(t){return{title:{margin:t.spacing(1)},body1:{margin:t.spacing(2.5)},textField:{width:"15.5rem",margin:t.spacing(1)},button:{margin:t.spacing(1)}}})),tt=["Power on the control station radio","Ensure the 48V battery is fully charged and plug it into the controller box","Power on the controller 48V and 12V","Ensure the vehicle Ethernet radio is connected to PoE","Ensure GPS has 12V supply"];function et(){var t=$(),e=tt.map((function(e,a){return Object(L.jsx)(C.a,{variant:"body1",align:"justify",className:t.body1,children:"".concat(a+1,". ").concat(e)},a)}));return Object(L.jsx)(X.a,{variant:"outlined",children:Object(L.jsxs)(q.a,{children:[Object(L.jsx)(C.a,{variant:"h5",className:t.title,children:"Instructions"}),e]})})}var at=a(336);function nt(t){var e=t.networking,a=t.handleRobotConnect,i=t.handleRobotDisconnect,r=t.setTopBarTitle;return Object(n.useEffect)((function(){r("Initial Setup")}),[]),Object(L.jsxs)(at.a,{container:!0,spacing:2,justify:"center",alignItems:"flex-start",children:[Object(L.jsx)(at.a,{item:!0,children:Object(L.jsx)(Q,{networking:e,handleRobotConnect:a,handleRobotDisconnect:i})}),Object(L.jsx)(at.a,{item:!0,children:Object(L.jsx)(et,{})})]})}var it=a(114),rt=a(222),ot=a(221),st=a(216),ct=a.n(st),lt=(a(275),a(351)),dt=a(337),ht=Object(F.a)((function(t){return{root:{display:"inline-block",position:"absolute",marginLeft:t.spacing(1.5),marginTop:t.spacing(1.5),boxShadow:"3px 3px 5px rgba(0,0,0,0.2)",zIndex:1},title:{margin:t.spacing(1)},body:{margin:t.spacing(1)},pathSwitch:{marginLeft:0}}}));function ut(t){var e=t.pathRecorder,a=ht();new Date;return Object(L.jsxs)(X.a,{variant:"outlined",className:a.root,children:[Object(L.jsx)(C.a,{variant:"h6",className:a.title,children:"Recording Path"}),Object(L.jsxs)(C.a,{variant:"body1",className:a.body,children:["Points Recorded: ",e.numberOfPoints]}),Object(L.jsx)(dt.a,{className:a.pathSwitch,control:Object(L.jsx)(lt.a,{checked:e.isRecordingLine,onChange:function(){return e.toggleLineRecording()},color:"primary"}),label:"Record a line"})]})}var bt=a(329),pt=Object(F.a)((function(t){return{root:{display:"inline-block",position:"absolute",marginLeft:t.spacing(1.5),marginTop:t.spacing(1.5),boxShadow:"3px 3px 5px rgba(0,0,0,0.2)"},title:{margin:t.spacing(1)},body:{margin:t.spacing(1),marginTop:0}}}));function jt(t){var e=t.networking,a=pt(),n=e.robotState,r=i.a.useState(!1),o=Object(s.a)(r,2);o[0],o[1],new Date;return Object(L.jsxs)(X.a,{variant:"outlined",className:a.root,children:[Object(L.jsx)(C.a,{variant:"h6",className:a.title,children:"Calibrating GPS"}),Object(L.jsxs)(C.a,{variant:"body1",className:a.body,children:["Status: ",n.gps.magneticCalibrationStatus]}),Object(L.jsxs)(C.a,{variant:"body1",className:a.body,children:["Progress: ",n.gps.magneticCalibrationProgress]}),Object(L.jsxs)(C.a,{variant:"body1",className:a.body,children:["Error: ",n.gps.magneticCalibrationError]})]})}var gt=function(t){Object(rt.a)(a,t);var e=Object(ot.a)(a);function a(){var t;Object(f.a)(this,a);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))).circleDiameter=300,t.sender_thottle_time=100,t.previousTime=Date.now(),t.handleJoystickStart=function(t,e){},t.handleJoystickEnd=function(e,a){setTimeout((function(){t.props.networking.senders.joystick(0,0)}),100)},t.handleJoystickMove=function(e,a){if(!(Date.now()-t.previousTime<t.sender_thottle_time)){t.previousTime=Date.now();var n=a.distance/(.5*t.circleDiameter),i=a.angle.radian-Math.PI/2;t.props.networking.senders.joystick(n,i)}},t}return Object(it.a)(a,[{key:"render",value:function(){return Object(L.jsxs)("div",{children:[Object(L.jsx)("h3",{style:{marginTop:0,marginBottom:5},children:"Press and drag below to move the robot"}),Object(L.jsx)(T.a,{title:"Linear Velocity",children:Object(L.jsxs)("span",{style:{fontSize:16},children:["v: ",this.props.networking.robotState.robotVelocityCommand.v.toFixed(2)," m/s"]})}),Object(L.jsx)(T.a,{title:"Measured Linear Velocity",children:Object(L.jsxs)("span",{style:{fontSize:16,marginLeft:16},children:["vm:"," ",Math.sqrt(Math.pow(this.props.networking.robotState.gps.eastVelocity,2)+Math.pow(this.props.networking.robotState.gps.northVelocity,2)).toFixed(2)," ","m/s"]})}),Object(L.jsx)("br",{}),Object(L.jsx)(T.a,{title:"Angular Velocity",children:Object(L.jsxs)("span",{style:{fontSize:16},children:["w: ",(this.props.networking.robotState.robotVelocityCommand.w/Math.PI*180).toFixed(0)," deg/s"]})}),Object(L.jsx)(T.a,{title:"Turning Radius",children:Object(L.jsxs)("span",{style:{fontSize:16,marginLeft:16},children:["r: ",this.props.networking.robotState.robotTurningRadius.toFixed(0)," m"]})}),Object(L.jsx)(T.a,{title:"Heading",children:Object(L.jsxs)("span",{style:{fontSize:16,marginLeft:16},children:["h: ",(this.props.networking.robotState.gps.heading/Math.PI*180).toFixed(0)," deg"]})}),Object(L.jsx)("br",{}),this.props.pathRecorder.isRecording?Object(L.jsx)(ut,{pathRecorder:this.props.pathRecorder}):null,Object(L.jsx)(bt.a,{in:5===this.props.networking.robotState.gps.magneticCalibrationStatus,timeout:{exit:1e4},children:Object(L.jsx)("div",{children:Object(L.jsx)(jt,{networking:this.props.networking})})}),Object(L.jsx)(ct.a,{className:"nipple",options:{mode:"dynamic",color:"blue",position:{top:"50%",left:"50%"},size:this.circleDiameter,nippleSize:90},style:{zIndex:0,outline:"1px dashed blue",width:"100%",height:"max( 100vh - 325px, 120px)",overflow:"hidden"},onStart:this.handleJoystickStart,onEnd:this.handleJoystickEnd,onMove:this.handleJoystickMove})]})}}]),a}(n.Component),mt=a(217),ft=a.n(mt),xt=a(218),Ot=a.n(xt),vt=a(219),yt=a.n(vt),wt=a(343),St=Object(F.a)((function(t){return{spinBox:{marginTop:t.spacing(1.5),marginBottom:t.spacing(1.5)},moveButton:{marginLeft:t.spacing(2)},rotateRightButton:{marginLeft:t.spacing(2)},rotateIcon:{marginLeft:t.spacing(1)}}})),kt=!1,Ct=!1;function Nt(t){var e=t.networking,a=t.setTopBarTitle,i=t.pathRecorder,r=St(),o=e.robotState,s=e.senders;return Object(n.useEffect)((function(){a("Manual Control")}),[]),Object(L.jsxs)("div",{style:{WebkitUserSelect:"none"},children:[Object(L.jsx)(dt.a,{control:Object(L.jsx)(lt.a,{checked:1===o.overseerState,onChange:function(t){t.target.checked?s.enableManaul():s.stop()},color:"primary"}),label:"Enable Manual Control",disabled:2===o.overseerState||3===o.overseerState||6===o.overseerState}),Object(L.jsx)(dt.a,{control:Object(L.jsx)(lt.a,{checked:!0===o.doesBrakeWhenStopped,onChange:function(){s.toggleBrakeWhenStopped()},color:"primary"}),label:"Apply Brake when Not Moving"}),Object(L.jsxs)(wt.a,{className:r.spinBox,children:[Object(L.jsxs)(D.a,{variant:"outlined",color:"primary",onPointerDown:function(){kt=!0,s.spin(.3)},onPointerUp:function(){kt=!1,s.spin(0)},onPointerOut:function(){kt&&s.spin(0)},children:["spin ",Object(L.jsx)(ft.a,{className:r.rotateIcon})]}),Object(L.jsxs)(D.a,{className:r.rotateRightButton,variant:"outlined",color:"primary",onPointerDown:function(){kt=!0,s.spin(-.3)},onPointerUp:function(){kt=!1,s.spin(0)},onPointerOut:function(){kt&&s.spin(0)},children:["spin ",Object(L.jsx)(Ot.a,{className:r.rotateIcon})]}),Object(L.jsxs)(D.a,{className:r.moveButton,variant:"outlined",color:"primary",onPointerDown:function(){Ct=!0,s.moveForward(.75)},onPointerUp:function(){Ct=!1,s.moveForward(0)},onPointerOut:function(){Ct&&s.moveForward(0)},children:["move ",Object(L.jsx)(yt.a,{className:r.rotateIcon})]})]}),Object(L.jsx)(gt,{networking:e,pathRecorder:i})]})}var Rt=a(18),Tt=a(339),Ft=a(338),At=a(142),Mt=a.n(At),_t=Object(F.a)((function(t){return{title:{margin:t.spacing(1)},body:{margin:t.spacing(1)},expand:{margin:"0 auto",paddingTop:0,paddingBottom:0,transform:"rotate(0deg)",marginLeft:"auto",transition:t.transitions.create("transform",{duration:t.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"},cardContent:{paddingBottom:0}}}));function Bt(t){var e=t.robotState,a=_t(),n=i.a.useState(!1),r=Object(s.a)(n,2),o=r[0],l=r[1];return Object(L.jsxs)(X.a,{variant:"outlined",children:[Object(L.jsxs)(q.a,{className:a.cardContent,children:[Object(L.jsx)(C.a,{variant:"h5",className:a.title,children:"General"}),Object(L.jsxs)(C.a,{variant:"body1",className:a.body,children:["Battery Temperature: ",e.batteryTemperature,"F"]}),Object(L.jsxs)(C.a,{variant:"body1",className:a.body,children:["Robot Internal Temperature: ",e.robotTemperature,"F"]}),Object(L.jsxs)(C.a,{variant:"body1",className:a.body,children:["Clients Connected to Robot: ",e.websocketClientCount]}),Object(L.jsx)(Ft.a,{in:o,timeout:"auto",unmountOnExit:!0,children:Object(L.jsxs)(C.a,{variant:"body1",className:a.body,children:["Battery Voltage: ",e.batteryVoltage.toFixed(2),"V"]})})]}),Object(L.jsx)(Tt.a,{disableSpacing:!0,children:Object(L.jsx)(V.a,{className:Object(Rt.a)(a.expand,Object(c.a)({},a.expandOpen,o)),onClick:function(){l(!o)},"aria-expanded":o,"aria-label":"show more",children:Object(L.jsx)(Mt.a,{})})})]})}var Lt=Object(F.a)((function(t){return{title:{margin:t.spacing(1)},body:{margin:t.spacing(1)},expand:{margin:"0 auto",paddingTop:0,paddingBottom:0,transform:"rotate(0deg)",marginLeft:"auto",transition:t.transitions.create("transform",{duration:t.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"},cardContent:{paddingBottom:0}}}));function Pt(t){var e=t.robotState,a=Lt(),n=i.a.useState(!1),r=Object(s.a)(n,2),o=r[0],l=r[1];return Object(L.jsxs)(X.a,{variant:"outlined",children:[Object(L.jsxs)(q.a,{className:a.cardContent,children:[Object(L.jsx)(C.a,{variant:"h5",className:a.title,children:"GPS"}),Object(L.jsxs)(C.a,{variant:"body1",className:a.body,children:["Status: ",j[e.gps.status]]}),Object(L.jsxs)(C.a,{variant:"body1",className:a.body,children:["Latitdue (deg): ",e.gps.latitude.toFixed(9)]}),Object(L.jsxs)(C.a,{variant:"body1",className:a.body,children:["Longitude (deg): ",e.gps.longitude.toFixed(9)]}),Object(L.jsxs)(C.a,{variant:"body1",className:a.body,children:["Heading (deg): ",(e.gps.heading/Math.PI*180).toFixed(2)]}),Object(L.jsxs)(C.a,{variant:"body1",className:a.body,children:["North Velocity (m/s): ",e.gps.northVelocity.toFixed(2)]}),Object(L.jsxs)(C.a,{variant:"body1",className:a.body,children:["East Velocity (m/s): ",e.gps.eastVelocity.toFixed(2)]}),Object(L.jsxs)(C.a,{variant:"body1",className:a.body,children:["Linear Speed (m/s):"," ",Math.sqrt(Math.pow(e.gps.eastVelocity,2)+Math.pow(e.gps.northVelocity,2)).toFixed(2)]}),Object(L.jsxs)(C.a,{variant:"body1",className:a.body,children:["Angular Velocity (deg/s): ",(e.gps.zAngularVelocity/Math.PI*180).toFixed(0)]}),Object(L.jsxs)(Ft.a,{in:o,timeout:"auto",unmountOnExit:!0,children:[Object(L.jsxs)(C.a,{variant:"body1",className:a.body,children:["System Status: ",e.gps.systemStatus.toString(2)]}),Object(L.jsxs)(C.a,{variant:"body1",className:a.body,children:["Filter Status: ",e.gps.filterStatus.toString(2)]})]})]}),Object(L.jsx)(Tt.a,{disableSpacing:!0,children:Object(L.jsx)(V.a,{className:Object(Rt.a)(a.expand,Object(c.a)({},a.expandOpen,o)),onClick:function(){l(!o)},"aria-expanded":o,"aria-label":"show more",children:Object(L.jsx)(Mt.a,{})})})]})}var It=Object(F.a)((function(t){return{title:{margin:t.spacing(1)},body:{margin:t.spacing(1)},errorIcon:{verticalAlign:"-3px",color:"red",fontSize:"17px"}}}));function Et(t){var e=t.motorController,a=t.id,n=t.location,i=It();return Object(L.jsx)(X.a,{variant:"outlined",children:Object(L.jsxs)(q.a,{children:[Object(L.jsxs)(C.a,{variant:"h5",className:i.title,children:["Motor Controller ",a]}),Object(L.jsxs)(C.a,{variant:"body1",className:i.title,children:["Motor Location: ",n]}),Object(L.jsxs)(C.a,{variant:"body1",className:i.body,children:["Error: ",g[e.errorWord]," ",0!==e.errorWord?Object(L.jsx)(R.a,{className:i.errorIcon}):null]}),Object(L.jsxs)(C.a,{variant:"body1",className:i.body,children:["Heartbeat Timeout: ",e.isHeartbeatTimeout.toString()," ",e.isHeartbeatTimeout?Object(L.jsx)(R.a,{className:i.errorIcon}):null]}),Object(L.jsxs)(C.a,{variant:"body1",className:i.body,children:["State: ",b[e.state]]}),Object(L.jsxs)(C.a,{variant:"body1",className:i.body,children:["NMT State: ",p[e.heartbeatNmt]]}),Object(L.jsxs)(C.a,{variant:"body1",className:i.body,children:["Motor Current (A): ",e.motorCurrentDraw.toFixed(2)]}),Object(L.jsxs)(C.a,{variant:"body1",className:i.body,children:["Actual Wheel RPM: ",e.wheelRpmActual.toFixed(0)]}),Object(L.jsxs)(C.a,{variant:"body1",className:i.body,children:["Winding Temperature (C): ",e.windingTemperature.toFixed(0)]})]})})}var Dt=a(191),Vt=a.n(Dt),Wt=Object(F.a)((function(t){return{title:{margin:t.spacing(1)},body:{margin:t.spacing(1)},expand:{margin:"0 auto",paddingTop:0,paddingBottom:0,transform:"rotate(0deg)",marginLeft:"auto",transition:t.transitions.create("transform",{duration:t.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"},cardContent:{paddingBottom:0},copyButton:{paddingTop:0,marginLeft:t.spacing(.5)}}}));function Jt(t){var e=t.robotState,a=Wt(),n=i.a.useState(!1),r=Object(s.a)(n,2),o=r[0],l=r[1];return Object(L.jsxs)(X.a,{variant:"outlined",children:[Object(L.jsxs)(q.a,{className:a.cardContent,children:[Object(L.jsx)(C.a,{variant:"h5",className:a.title,children:"Target Vehicle"}),Object(L.jsxs)(C.a,{variant:"body1",className:a.body,children:["Latitude (deg): ",e.targetVehicle.latitude.toFixed(7),Object(L.jsx)(V.a,{className:a.copyButton,size:"small",onClick:function(){return navigator.clipboard.writeText(e.targetVehicle.latitude.toFixed(7).toString())},children:Object(L.jsx)(Vt.a,{style:{fontSize:16}})})]}),Object(L.jsxs)(C.a,{variant:"body1",className:a.body,children:["Longitude (deg): ",e.targetVehicle.longitude.toFixed(7),Object(L.jsx)(V.a,{className:a.copyButton,size:"small",onClick:function(){return navigator.clipboard.writeText(e.targetVehicle.longitude.toFixed(7).toString())},children:Object(L.jsx)(Vt.a,{style:{fontSize:16}})})]}),Object(L.jsxs)(C.a,{variant:"body1",className:a.body,children:["Heading (deg): ",e.targetVehicle.heading.toFixed(2),Object(L.jsx)(V.a,{className:a.copyButton,size:"small",onClick:function(){return navigator.clipboard.writeText(e.targetVehicle.heading.toFixed(2).toString())},children:Object(L.jsx)(Vt.a,{style:{fontSize:16}})})]}),Object(L.jsxs)(C.a,{variant:"body1",className:a.body,children:["Velocity (m/s): ",e.targetVehicle.velocity.toFixed(2)]}),Object(L.jsxs)(C.a,{variant:"body1",className:a.body,children:["GPS Ready: ",e.targetVehicle.gps_ready.toString()]}),Object(L.jsxs)(C.a,{variant:"body1",className:a.body,children:["GPS Correction Type: ",e.targetVehicle.gps_correction_type]})]}),Object(L.jsx)(Tt.a,{disableSpacing:!0,children:Object(L.jsx)(V.a,{className:Object(Rt.a)(a.expand,Object(c.a)({},a.expandOpen,o)),onClick:function(){l(!o)},"aria-expanded":o,"aria-label":"show more",children:Object(L.jsx)(Mt.a,{})})})]})}function zt(t){var e=t.networking,a=t.setTopBarTitle,i=e.robotState;return Object(n.useEffect)((function(){a("Robot Status")}),[]),Object(L.jsxs)("div",{children:[Object(L.jsxs)(at.a,{container:!0,spacing:2,alignItems:"flex-start",children:[Object(L.jsx)(at.a,{item:!0,children:Object(L.jsx)(Bt,{robotState:i})}),Object(L.jsx)(at.a,{item:!0,children:Object(L.jsx)(Pt,{robotState:i})}),Object(L.jsx)(at.a,{item:!0,children:Object(L.jsx)(Et,{motorController:i.motorControllers.leftFront,id:1,location:"left_front"})}),Object(L.jsx)(at.a,{item:!0,children:Object(L.jsx)(Et,{motorController:i.motorControllers.leftBack,id:2,location:"left_back"})}),Object(L.jsx)(at.a,{item:!0,children:Object(L.jsx)(Et,{motorController:i.motorControllers.rightFront,id:3,location:"right_front"})}),Object(L.jsx)(at.a,{item:!0,children:Object(L.jsx)(Et,{motorController:i.motorControllers.rightBack,id:4,location:"right_back"})}),Object(L.jsx)(at.a,{item:!0,children:Object(L.jsx)(Jt,{robotState:i})})]}),Object(L.jsx)(C.a,{variant:"h6",style:{marginTop:"15px"},children:"Error Log"}),Object(L.jsx)(wt.a,{mb:2,display:"flex",flexDirection:"column",height:"250px",style:{border:"2px solid lightgrey",overflow:"hidden",overflowY:"scroll",overflowX:"scroll",padding:"10px"},children:e.errorMessages.map((function(t){return Object(L.jsxs)("div",{children:[" ",t," "]},t)}))})]})}var Ht=Object(F.a)((function(t){return{title:{margin:t.spacing(1)},body:{margin:t.spacing(1)},expand:{margin:"0 auto",paddingTop:0,paddingBottom:0,transform:"rotate(0deg)",marginLeft:"auto",transition:t.transitions.create("transform",{duration:t.transitions.duration.shortest}),button:{margin:t.spacing(1)}},expandOpen:{transform:"rotate(180deg)"},cardContent:{paddingBottom:0},button:{margin:t.spacing(1)}}}));function Gt(t){var e=t.networking,a=Ht(),n=e.robotState,r=e.senders,o=i.a.useState(!1),c=Object(s.a)(o,2);c[0],c[1],new Date;return Object(L.jsx)(X.a,{variant:"outlined",children:Object(L.jsxs)(q.a,{className:a.cardContent,children:[Object(L.jsx)(C.a,{variant:"h5",className:a.title,children:"GPS Magnetic Calibration"}),Object(L.jsxs)(C.a,{variant:"body1",className:a.body,children:["Status: ",n.gps.magneticCalibrationStatus]}),Object(L.jsxs)(C.a,{variant:"body1",className:a.body,children:["Progress: ",n.gps.magneticCalibrationProgress]}),Object(L.jsxs)(C.a,{variant:"body1",className:a.body,children:["Error: ",n.gps.magneticCalibrationError]}),Object(L.jsx)(D.a,{className:a.button,variant:"outlined",color:"primary",onClick:function(){r.setMagneticCalibration(2)},children:"Start"}),Object(L.jsx)(D.a,{className:a.button,variant:"outlined",color:"primary",onClick:function(){r.setMagneticCalibration(0)},children:"Cancel"})]})})}function Ut(t){var e=t.networking,a=t.setTopBarTitle;return Object(n.useEffect)((function(){a("Configuration")}),[]),Object(L.jsx)(at.a,{container:!0,spacing:2,alignItems:"flex-start",children:Object(L.jsx)(at.a,{item:!0,children:Object(L.jsx)(Gt,{networking:e})})})}var Yt=a(146),Xt=a(190),qt=a(344),Zt=a(340),Kt=a(349),Qt=a(345),$t=a(187),te=Object(F.a)((function(t){return{notes:{margin:t.spacing(1),marginBottom:t.spacing(3)},body:{margin:t.spacing(1)},button:{margin:t.spacing(1)}}}));function ee(t){var e=t.networking,a=t.pathRecorder,i=te(),r=(new Date,Object(n.useState)(!1)),o=Object(s.a)(r,2),c=o[0],l=o[1];return Object(L.jsxs)("div",{children:[Object(L.jsx)(C.a,{variant:"body1",className:i.notes,children:Object(L.jsxs)("ul",{style:{margin:0,paddingLeft:20},children:[Object(L.jsx)("li",{children:"The GPS cordinates of the robot can be recorded here."}),Object(L.jsx)("li",{children:"Move the robot to create a path when recording starts."}),Object(L.jsx)("li",{children:"Tips for recording:"}),Object(L.jsxs)("ul",{children:[Object(L.jsx)("li",{children:"Since speed is not recorded, move robot slowly to accurately capture path."}),Object(L.jsx)("li",{children:"You may record path that has sharp corners. Robot can be programmed later to stop at the corner and rotate to the specified heading before moving again."})]})]})}),Object(L.jsx)(O.a,{}),Object(L.jsxs)(C.a,{variant:"body1",className:i.body,children:["Status: ",a.isRecording?"Recording...":"Not Recording"]}),Object(L.jsxs)(C.a,{variant:"body1",className:i.body,children:["Points Recorded: ",a.numberOfPoints]}),Object(L.jsx)(D.a,{className:i.button,variant:"outlined",color:"primary",onClick:function(){a.requestRecording()},children:"record"}),Object(L.jsx)(D.a,{className:i.button,variant:"outlined",color:"primary",onClick:function(){a.stopRecording()},children:"stop"}),Object(L.jsx)("br",{}),Object(L.jsx)(D.a,{className:i.button,variant:"outlined",color:"primary",onClick:function(){!function(){for(var t="Global\n",e=0;e<a.numberOfPoints;e++)t=t.concat(a.latitudes[e].toFixed(17).toString()," ",a.longitudes[e].toFixed(17).toString(),"\n");var n=new Blob([t],{type:"text/plain;charset=utf-8"});Object($t.saveAs)(n,"stride_path.txt")}()},children:"export To file"}),Object(L.jsx)("br",{}),Object(L.jsx)(Kt.a,{open:c,autoHideDuration:8e3,onClose:function(){l(!1)},children:Object(L.jsx)(Qt.a,{elevation:6,variant:"filled",severity:"info",children:"Go to the SHARED tab above in another connected device."})}),Object(L.jsx)(D.a,{className:i.button,variant:"outlined",color:"primary",onClick:function(){l(!0),e.senders.sharePath(a.latitudes,a.longitudes)},children:"share with other devices"})]})}var ae=a(101),ne=a(76),ie={width:"calc(min(100%, 90vh))",paddingTop:"calc((min(100%, 90vh)) - 15px)",position:"relative"},re={top:0,left:0,bottom:0,right:0,position:"absolute"},oe=new(function(){function t(){Object(f.a)(this,t),this.latitudes=void 0,this.longitudes=void 0,this.easts=void 0,this.norths=void 0,this.E_factor=void 0,this.N_factor=void 0,this.lat_ref=void 0,this.long_ref=void 0,this.latitudes=[0],this.longitudes=[0],this.easts=[0],this.norths=[0],this.E_factor=0,this.N_factor=0,this.lat_ref=0,this.long_ref=0}return Object(it.a)(t,[{key:"importFromRecorder",value:function(t,e,a){this.latitudes=t,this.longitudes=e,this.easts=[],this.norths=[];var n=_(t[0]),i=Object(s.a)(n,2),r=i[0],o=i[1];this.E_factor=r,this.N_factor=o,this.lat_ref=t[0],this.long_ref=e[0];for(var c=0;c<t.length;c++){var l=B(t[c],e[c],this.lat_ref,this.long_ref,this.E_factor,this.N_factor),d=Object(s.a)(l,2),h=d[0],u=d[1];this.easts.push(u),this.norths.push(h)}a.current.data=this.createChartData()}},{key:"isNumeric",value:function(t){return!isNaN(Number(t))&&!isNaN(parseFloat(t))}},{key:"importFromFile",value:function(t,e){var a=this;this.easts=[],this.norths=[],this.latitudes=[],this.longitudes=[];var n=t.current.files[0],i=new FileReader;i.addEventListener("load",(function(n){var i,r=n.target.result.split("\n"),o=1,c=Object(m.a)(r);try{for(c.s();!(i=c.n()).done;){var l=i.value;if(1!==o){var d=l.split(/ |\t/);2===d.length&&a.isNumeric(d[0])&&a.isNumeric(d[1])&&(a.latitudes.push(Number(d[0])),a.longitudes.push(Number(d[1])))}else o++}}catch(v){c.e(v)}finally{c.f()}var h=_(a.latitudes[0]),u=Object(s.a)(h,2),b=u[0],p=u[1];a.E_factor=b,a.N_factor=p,a.lat_ref=a.latitudes[0],a.long_ref=a.longitudes[0];for(var j=0;j<a.latitudes.length;j++){var g=B(a.latitudes[j],a.longitudes[j],a.lat_ref,a.long_ref,a.E_factor,a.N_factor),f=Object(s.a)(g,2),x=f[0],O=f[1];a.easts.push(O),a.norths.push(x)}t.current.value="",e.current.data=a.createChartData()})),i.readAsText(n)}},{key:"createChartData",value:function(){for(var t=[],e=0;e<this.easts.length;e++)t.push({ax:this.easts[e],ay:this.norths[e],aValue:e});return t}},{key:"twoPointDistance",value:function(t,e,a,n){return Math.sqrt(Math.pow(a-t,2)+Math.pow(n-e,2))}},{key:"correctPointSpacing",value:function(t){}}]),t}()),se=Object(F.a)((function(t){return{body:{margin:t.spacing(1)},button:{margin:t.spacing(1)}}}));function ce(t){var e=t.pathRecorder,a=se(),i=Object(n.useRef)(),r=Object(n.useRef)();return Object(n.useLayoutEffect)((function(){var t=ae.d("chartdiv",ne.e);t.paddingRight=20,t.data=oe.createChartData();var e=t.xAxes.push(new ne.d);e.renderer.minGridDistance=40,e.title.text="East",e.renderer.baseGrid.strokeOpacity=.3,e.renderer.baseGrid.strokeWidth=1;var a=t.yAxes.push(new ne.d);a.title.text="North",a.renderer.baseGrid.strokeOpacity=.3,a.renderer.baseGrid.strokeWidth=1;var n=t.series.push(new ne.c);n.dataFields.valueX="ax",n.dataFields.valueY="ay",n.dataFields.value="aValue",n.strokeWidth=2;var i=n.bullets.push(new ne.b);return i.circle.radius=3,t.numberFormatter.numberFormat="#.##",i.tooltipText="[bold]Index {value}[/] ({valueX}, {valueY})",t.scrollbarX=new ae.a,t.scrollbarY=new ae.a,r.current=t,function(){t.dispose()}}),[]),Object(L.jsxs)("div",{children:[Object(L.jsx)(D.a,{className:a.button,variant:"outlined",color:"primary",onClick:function(){oe.importFromRecorder(e.latitudes,e.longitudes,r)},children:"import from recorder"}),Object(L.jsxs)(D.a,{className:a.button,variant:"outlined",color:"primary",component:"label",children:["import from file",Object(L.jsx)("input",{type:"file",ref:i,onChange:function(){return oe.importFromFile(i,r)},hidden:!0})]}),Object(L.jsx)("div",{style:ie,children:Object(L.jsx)("div",{id:"chartdiv",style:re})})]})}var le=Object(F.a)((function(t){return{notes:{margin:t.spacing(1),marginBottom:t.spacing(3)},body:{margin:t.spacing(1)},button:{margin:t.spacing(1)}}}));function de(t){var e=t.networking,a=le(),n=e.receivedSharedPath;new Date;return Object(L.jsxs)("div",{children:[Object(L.jsx)(C.a,{variant:"body1",className:a.notes,children:"Shared path from another device will appear here."}),Object(L.jsxs)(C.a,{variant:"body1",className:a.body,children:["Time Received: ",n.timestamp," ",Object(L.jsx)("br",{}),"Number of Points: ",n.latitudes.length]}),Object(L.jsx)(D.a,{className:a.button,variant:"outlined",color:"primary",onClick:function(){!function(){for(var t="Global\n",e=0;e<n.latitudes.length;e++)t=t.concat(n.latitudes[e].toFixed(17).toString()," ",n.longitudes[e].toFixed(17).toString(),"\n");var a=new Blob([t],{type:"text/plain;charset=utf-8"});Object($t.saveAs)(a,"stride_path.txt")}()},children:"export To file"})]})}var he=["children","value","index"];function ue(t){var e=t.children,a=t.value,n=t.index,i=Object(Xt.a)(t,he);return Object(L.jsx)("div",Object(Yt.a)(Object(Yt.a)({role:"tabpanel",hidden:a!==n,id:"simple-tabpanel-".concat(n)},i),{},{children:a===n&&Object(L.jsx)(wt.a,{p:3,children:Object(L.jsx)(C.a,{children:e})})}))}var be=Object(F.a)((function(t){return{root:{backgroundColor:t.palette.background.paper},tab:{color:"rgb(64,64,64)"}}}));function pe(t){var e=t.networking,a=t.setTopBarTitle,r=t.pathRecorder,o=be(),c=i.a.useState(0),l=Object(s.a)(c,2),d=l[0],h=l[1];return Object(n.useEffect)((function(){a("Path")}),[]),Object(L.jsxs)("div",{className:o.root,children:[Object(L.jsx)(E.a,{position:"static",color:"default",children:Object(L.jsxs)(qt.a,{value:d,variant:"scrollable",scrollButtons:"auto",indicatorColor:"primary",textColor:"primary",onChange:function(t,e){h(e)},children:[Object(L.jsx)(Zt.a,{label:"Record",className:o.tab}),Object(L.jsx)(Zt.a,{label:"View",className:o.tab}),Object(L.jsx)(Zt.a,{label:"Shared",className:o.tab})]})}),Object(L.jsx)(ue,{value:d,index:0,children:Object(L.jsx)(ee,{networking:e,pathRecorder:r})}),Object(L.jsx)(ue,{value:d,index:1,children:Object(L.jsx)(ce,{pathRecorder:r})}),Object(L.jsx)(ue,{value:d,index:2,children:Object(L.jsx)(de,{networking:e})})]})}var je=Object(F.a)((function(t){return{notes:{margin:t.spacing(1),marginBottom:t.spacing(3)},body:{margin:t.spacing(1)},button:{margin:t.spacing(1)}}}));function ge(t){var e=t.networking,a=je(),i=Object(n.useRef)(),r=Object(n.useRef)();return Object(L.jsxs)("div",{children:[Object(L.jsx)(C.a,{variant:"body1",className:a.notes,children:"Note that the robot only stores the most recently uploaded path and script files."}),Object(L.jsxs)(C.a,{variant:"body1",className:a.body,children:["Path (.txt file): ",e.robotState.pathFollower.pathName," ",Object(L.jsx)("br",{}),"Script (.py file): ",e.robotState.pathFollower.scriptName]}),Object(L.jsxs)(D.a,{className:a.button,variant:"outlined",color:"primary",component:"label",children:["upload path",Object(L.jsx)("input",{type:"file",ref:i,onChange:function(){!function(){var t=i.current.files[0],a=new FileReader;a.addEventListener("load",(function(a){var n=a.target.result;e.senders.uploadPath(t.name,n)})),i.current.value="",a.readAsText(t)}()},hidden:!0})]}),Object(L.jsxs)(D.a,{className:a.button,variant:"outlined",color:"primary",component:"label",children:["upload script",Object(L.jsx)("input",{type:"file",ref:r,onChange:function(){!function(){var t=r.current.files[0],a=new FileReader;a.addEventListener("load",(function(a){var n=a.target.result;e.senders.uploadScript(t.name,n)})),r.current.value="",a.readAsText(t)}()},hidden:!0})]})]})}var me=a(156),fe={width:"calc(min(100%, 70vh))",paddingTop:"calc((min(100%, 70vh)) - 0px)",position:"relative"},xe={top:0,left:0,bottom:0,right:0,position:"absolute"},Oe=new(function(){function t(){Object(f.a)(this,t),this.latitudes=void 0,this.longitudes=void 0,this.easts=void 0,this.norths=void 0,this.E_factor=void 0,this.N_factor=void 0,this.lat_ref=void 0,this.long_ref=void 0,this.robot_east=void 0,this.robot_north=void 0,this.latitudes=[0],this.longitudes=[0],this.easts=[0],this.norths=[0],this.E_factor=0,this.N_factor=0,this.lat_ref=0,this.long_ref=0,this.robot_east=0,this.robot_north=0}return Object(it.a)(t,[{key:"plotPathSeries",value:function(t,e,a,n,i,r){if(!0===r||this.latitudes!==t&&void 0!==a.current){this.latitudes=t,this.longitudes=e,this.easts=[],this.norths=[];var o=_(t[0]),c=Object(s.a)(o,2),l=c[0],d=c[1];this.E_factor=l,this.N_factor=d,this.lat_ref=t[0],this.long_ref=e[0];for(var h=0;h<t.length;h++){var u=B(t[h],e[h],this.lat_ref,this.long_ref,this.E_factor,this.N_factor),b=Object(s.a)(u,2),p=b[0],j=b[1];this.easts.push(j),this.norths.push(p)}var g=Math.min.apply(Math,Object(me.a)(this.easts)),m=Math.max.apply(Math,Object(me.a)(this.easts)),f=Math.min.apply(Math,Object(me.a)(this.norths)),x=Math.max.apply(Math,Object(me.a)(this.norths)),O=Math.max(m-g,x-f);n.current.min=g-3,n.current.max=g+O+3,i.current.min=f-3,i.current.max=f+O+3,a.current.data=this.createPathSeriesData()}}},{key:"plotRobotSeries",value:function(t,e,a,n){if(void 0!==n.current){var i=B(t,e,this.lat_ref,this.long_ref,this.E_factor,this.N_factor),r=Object(s.a)(i,2),o=r[0],c=r[1];n.current.addData({bx:c,by:o,angle:a/Math.PI*180},1),this.robot_east=c,this.robot_north=o}}},{key:"createPathSeriesData",value:function(){for(var t=[],e=0;e<this.easts.length;e++)t.push({ax:this.easts[e],ay:this.norths[e],aValue:e});return t}}]),t}()),ve=Object(F.a)((function(t){return{notes:{margin:t.spacing(1)},body:{margin:t.spacing(1)},button:{margin:t.spacing(.5),padding:t.spacing(1),fontSize:11},messageBox:{maxHeight:10}}}));function ye(t){var e=t.networking,a=ve(),i=Object(n.useRef)(),r=Object(n.useRef)(),o=Object(n.useRef)(),s=Object(n.useRef)();return Oe.plotPathSeries(e.pathToFollow.latitudes,e.pathToFollow.longitudes,i,o,s,!1),Oe.plotRobotSeries(e.robotState.gps.latitude,e.robotState.gps.longitude,e.robotState.gps.heading,r),Object(n.useLayoutEffect)((function(){var t=ae.d("chartdiv",ne.e);t.paddingRight=20;var a=t.xAxes.push(new ne.d);a.renderer.minGridDistance=40,a.title.text="East",a.renderer.baseGrid.strokeOpacity=.5,a.renderer.baseGrid.strokeWidth=1,a.strictMinMax=!0;var n=t.yAxes.push(new ne.d);n.renderer.minGridDistance=40,n.title.text="North",n.renderer.baseGrid.strokeOpacity=.5,n.renderer.baseGrid.strokeWidth=1,n.strictMinMax=!0;var c=t.series.push(new ne.c);c.dataFields.valueX="ax",c.dataFields.valueY="ay",c.dataFields.value="aValue",c.strokeWidth=2;var l=c.bullets.push(new ne.b);l.circle.radius=3;var d=t.series.push(new ne.c);d.dataFields.valueX="bx",d.dataFields.valueY="by",d.strokeWidth=2,d.stroke=ae.c("#ff0000"),d.data=[{bx:0,by:0,angle:0},{bx:0,by:0,angle:0}];var h=d.bullets.push(new ne.a);h.propertyFields.rotation="angle";var u=h.createChild(ae.b);return u.horizontalCenter="middle",u.verticalCenter="middle",u.direction="top",u.width=10,u.height=25,u.fill=ae.c("#ffffff00"),u.strokeWidth=3,t.numberFormatter.numberFormat="#.##",l.tooltipText="[bold]Index {value}[/] ({valueX}, {valueY})",i.current=c,r.current=d,o.current=a,s.current=n,Oe.plotPathSeries(e.pathToFollow.latitudes,e.pathToFollow.longitudes,i,o,s,!0),function(){t.dispose()}}),[]),Object(L.jsxs)("div",{children:[Object(L.jsx)(D.a,{className:a.button,variant:"outlined",color:"primary",onClick:function(){e.senders.startPathFollowing()},children:"start test"}),Object(L.jsx)(D.a,{className:a.button,variant:"outlined",color:"primary",onClick:function(){e.senders.returnToStart()},children:"return to start position"}),Object(L.jsx)(D.a,{className:a.button,variant:"outlined",color:"primary",onClick:function(){!function(){var t=document.createElement("a");t.href="http://195.0.0.".concat(e.guiState.id,":3001/test-data.csv"),t.click()}()},children:"download test data"}),Object(L.jsxs)(C.a,{variant:"body2",className:a.body,children:["GPS RTK status: ",e.robotState.gps.status,Object(L.jsx)("br",{}),"Robot Location: (",Oe.robot_east.toFixed(2),", ",Oe.robot_north.toFixed(2),")",Object(L.jsx)("br",{}),"Heading: ",(e.robotState.gps.heading/Math.PI*180).toFixed(0)," deg",Object(L.jsx)("br",{}),"Speed:"," ",Math.sqrt(Math.pow(e.robotState.gps.eastVelocity,2)+Math.pow(e.robotState.gps.northVelocity,2)).toFixed(2)," ","m/s"]}),Object(L.jsx)("div",{style:fe,children:Object(L.jsx)("div",{id:"chartdiv",style:xe})}),Object(L.jsx)(C.a,{variant:"h6",style:{marginTop:"15px"},children:"Test Log"}),Object(L.jsx)(wt.a,{mb:2,display:"flex",flexDirection:"column",height:"250px",style:{border:"2px solid lightgrey",overflow:"hidden",overflowY:"scroll",overflowX:"scroll",padding:"10px"},children:e.testLogMessages.map((function(t){return Object(L.jsxs)("div",{children:[" ",t," "]},t)}))})]})}var we=["children","value","index"];function Se(t){var e=t.children,a=t.value,n=t.index,i=Object(Xt.a)(t,we);return Object(L.jsx)("div",Object(Yt.a)(Object(Yt.a)({role:"tabpanel",hidden:a!==n,id:"simple-tabpanel-".concat(n)},i),{},{children:a===n&&Object(L.jsx)(wt.a,{p:3,children:Object(L.jsx)(C.a,{children:e})})}))}var ke=Object(F.a)((function(t){return{root:{backgroundColor:t.palette.background.paper},tab:{color:"rgb(64,64,64)"}}}));function Ce(t){var e=t.networking,a=t.setTopBarTitle,r=(t.pathRecorder,ke()),o=i.a.useState(0),c=Object(s.a)(o,2),l=c[0],d=c[1];return Object(n.useEffect)((function(){a("Path Following")}),[]),Object(L.jsxs)("div",{className:r.root,children:[Object(L.jsx)(E.a,{position:"static",color:"default",children:Object(L.jsxs)(qt.a,{value:l,variant:"scrollable",scrollButtons:"auto",indicatorColor:"primary",textColor:"primary",onChange:function(t,e){d(e)},children:[Object(L.jsx)(Zt.a,{label:"prepare",className:r.tab}),Object(L.jsx)(Zt.a,{label:"test",className:r.tab})]})}),Object(L.jsx)(Se,{value:l,index:0,children:Object(L.jsx)(ge,{networking:e})}),Object(L.jsx)(Se,{value:l,index:1,children:Object(L.jsx)(ye,{networking:e})})]})}var Ne=a(220),Re=a.n(Ne),Te=a(347),Fe=Object(F.a)((function(t){return{motorTempInfoButton:{paddingBottom:1,paddingTop:0,marginLeft:t.spacing(1),color:"white"},motorTempInfoCard:{width:400},snackbar:{opacity:.85}}}));function Ae(t){var e=t.networking,a=Fe(),i=Object(n.useState)(0),r=Object(s.a)(i,2),o=r[0],c=r[1],l=Object(n.useState)(!1),d=Object(s.a)(l,2),h=d[0],u=d[1],b=Object(n.useState)(!1),p=Object(s.a)(b,2),j=p[0],g=p[1];return Object(n.useEffect)((function(){var t=e.robotState.motorControllers,a=Math.max(t.leftBack.windingTemperature,t.leftFront.windingTemperature,t.rightBack.windingTemperature,t.rightFront.windingTemperature);c(a),u(a>85)})),Object(L.jsxs)("div",{children:[Object(L.jsx)(Te.a,{style:{display:"flex",alignItems:"center",justifyContent:"center"},open:j,onClose:function(){return g(!1)},children:Object(L.jsx)(X.a,{className:a.motorTempInfoCard,variant:"outlined",children:Object(L.jsx)(q.a,{children:Object(L.jsxs)(C.a,{variant:"body1",children:["Upon reaching the temperature threshold, if Stride is on a slope, it will move downhill until flat ground. ",Object(L.jsx)("br",{}),'This feature is omitted in the "E-stopped" state, in which Stride will attempt to stay still until the motors give out.']})})})}),Object(L.jsx)(Kt.a,{className:a.snackbar,open:h,children:Object(L.jsxs)(Qt.a,{elevation:6,variant:"filled",severity:"warning",children:["Motor Temp: ",o," / 105C",Object(L.jsx)(V.a,{className:a.motorTempInfoButton,size:"small",onClick:function(){g(!0)},children:Object(L.jsx)(Re.a,{})})]})})]})}var Me=Object(F.a)((function(t){return{snackbar:{opacity:.85}}}));function _e(t){var e=t.networking,a=Me(),i=Object(n.useState)(!1),r=Object(s.a)(i,2),o=r[0],c=r[1];return Object(n.useEffect)((function(){!0===e.isNewTestDataReady&&(c(!0),e.isNewTestDataReady=!1)})),Object(L.jsx)("div",{children:Object(L.jsx)(Kt.a,{className:a.snackbar,open:o,autoHideDuration:5e3,onClose:function(){c(!1)},anchorOrigin:{vertical:"top",horizontal:"center"},children:Object(L.jsx)(Qt.a,{elevation:6,variant:"filled",severity:"info",children:"Test Data Ready for Download"})})})}var Be=a(341),Le=function(){function t(){Object(f.a)(this,t),this.isRecording=void 0,this.isRecordingLine=void 0,this.hasBeenRecordingLine=void 0,this.pointDistance=void 0,this.latitudes=void 0,this.longitudes=void 0,this.priorLatitude=void 0,this.priorLongitude=void 0,this.latRef=void 0,this.longRef=void 0,this.E_factor=void 0,this.N_factor=void 0,this.recorderId=void 0,this.numberOfPoints=void 0,this.isRecording=!1,this.isRecordingLine=!1,this.hasBeenRecordingLine=!1,this.pointDistance=.3,this.latitudes=[],this.longitudes=[],this.priorLatitude=-1,this.priorLongitude=-1,this.latRef=-1,this.longRef=-1,this.E_factor=0,this.N_factor=0,this.recorderId=0,this.numberOfPoints=0}return Object(it.a)(t,[{key:"requestRecording",value:function(){this.isRecording=!0,this.isRecordingLine=!1,this.hasBeenRecordingLine=!1,this.latitudes=[],this.longitudes=[],this.priorLatitude=-1,this.priorLongitude=-1,this.numberOfPoints=0}},{key:"stopRecording",value:function(){this.isRecording=!1,this.isRecordingLine=!1}},{key:"toggleLineRecording",value:function(){this.isRecordingLine=!this.isRecordingLine}},{key:"recordWhenRequested",value:function(t,e){if(this.isRecording){var a=this.haversine(this.priorLatitude,t,this.priorLongitude,e);if(-1===this.priorLatitude||-1===this.priorLongitude){this.priorLatitude=t,this.priorLongitude=e,this.latitudes.push(t),this.longitudes.push(e),this.numberOfPoints+=1,this.latRef=t,this.longRef=e;var n=_(this.latRef);this.E_factor=n[0],this.N_factor=n[1]}else if(this.isRecordingLine)this.hasBeenRecordingLine=!0;else if(this.hasBeenRecordingLine){this.hasBeenRecordingLine=!1;for(var i=B(this.priorLatitude,this.priorLongitude,this.latRef,this.longRef,this.E_factor,this.N_factor),r=Object(s.a)(i,2),o=r[0],c=r[1],l=B(t,e,this.latRef,this.longRef,this.E_factor,this.N_factor),d=Object(s.a)(l,2),h=d[0],u=d[1],b=Math.pow(Math.pow(o-h,2)+Math.pow(c-u,2),.5),p=Math.floor(b/this.pointDistance),j=1;j<=p;j++){var g=(O=o+j/p*(h-o),v=c+j/p*(u-c),y=this.latRef,w=this.longRef,S=this.E_factor,k=this.N_factor,[O/k+y,v/S+w]),m=Object(s.a)(g,2),f=m[0],x=m[1];this.latitudes.push(f),this.longitudes.push(x),this.numberOfPoints+=1,this.priorLatitude=f,this.priorLongitude=x}}else a>this.pointDistance&&(this.latitudes.push(t),this.longitudes.push(e),this.numberOfPoints+=1,this.priorLatitude=t,this.priorLongitude=e)}var O,v,y,w,S,k}},{key:"haversine",value:function(t,e,a,n){var i=t/180*Math.PI,r=e/180*Math.PI,o=a/180*Math.PI,s=r-i,c=n/180*Math.PI-o;return 6371008*Math.sqrt(Math.pow(s,2)+Math.cos(i)*Math.cos(r)*Math.pow(c,2))}}]),t}(),Pe=new x("",!1),Ie=new Le,Ee=Object(F.a)((function(t){var e;return{toolbar:t.mixins.toolbar,content:(e={},Object(c.a)(e,t.breakpoints.up("md"),{width:"calc(100% - ".concat(h,"px)"),marginLeft:h}),Object(c.a)(e,"padding",t.spacing(3)),e)}}));function De(){var t=Ee(),e=Object(n.useState)({}),a=Object(s.a)(e,2),i=(a[0],a[1]),r=Object(n.useState)(""),o=Object(s.a)(r,2),c=o[0],h=o[1],u=Object(n.useState)(!1),b=Object(s.a)(u,2),p=b[0],j=b[1];function g(t){"useRecentId"===t?(Pe.socket.close(),Pe=new x(Pe.lastConnectedId,Pe.isConnectedOnce)):(Pe.socket.close(),Pe=new x(t,!1))}return Object(n.useEffect)((function(){var t=setInterval((function(){i({});var t=Pe.robotState.gps.latitude,e=Pe.robotState.gps.longitude;Ie.recordWhenRequested(t,e)}),100);return function(){clearInterval(t)}}),[]),Object(L.jsxs)(l.a,{children:[Object(L.jsx)(Be.a,{}),Object(L.jsx)(Ae,{networking:Pe}),Object(L.jsx)(_e,{networking:Pe}),Object(L.jsx)(Y,{networking:Pe,setMobileOpen:j,topBarTitle:c,pathRecorder:Ie,handleRobotConnect:g}),Object(L.jsx)(I,{networking:Pe,mobileOpen:p,setMobileOpen:j}),Object(L.jsxs)("main",{className:t.content,children:[Object(L.jsx)("div",{className:t.toolbar}),Object(L.jsxs)(d.d,{children:[Object(L.jsx)(d.b,{path:"/",exact:!0,children:Object(L.jsx)(d.a,{to:"/initialsetup"})}),Object(L.jsx)(d.b,{path:"/initialsetup",children:Object(L.jsx)(nt,{networking:Pe,handleRobotConnect:g,handleRobotDisconnect:function(){Pe.socket.close()},setTopBarTitle:h})}),Object(L.jsx)(d.b,{path:"/manualcontrol",children:Object(L.jsx)(Nt,{networking:Pe,setTopBarTitle:h,pathRecorder:Ie})}),Object(L.jsx)(d.b,{path:"/robotstatus",children:Object(L.jsx)(zt,{networking:Pe,setTopBarTitle:h})}),Object(L.jsx)(d.b,{path:"/path",children:Object(L.jsx)(pe,{networking:Pe,setTopBarTitle:h,pathRecorder:Ie})}),Object(L.jsx)(d.b,{path:"/pathfollowing",children:Object(L.jsx)(Ce,{networking:Pe,setTopBarTitle:h,pathRecorder:Ie})}),Object(L.jsx)(d.b,{path:"/configuration",children:Object(L.jsx)(Ut,{networking:Pe,setTopBarTitle:h})})]})]})]})}var Ve=function(t){t&&t instanceof Function&&a.e(7).then(a.bind(null,561)).then((function(e){var a=e.getCLS,n=e.getFID,i=e.getFCP,r=e.getLCP,o=e.getTTFB;a(t),n(t),i(t),r(t),o(t)}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(Object(L.jsx)(i.a.StrictMode,{children:Object(L.jsx)(De,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)})),Ve()}},[[282,1,3]]]);
//# sourceMappingURL=main.5ac4b762.chunk.js.map